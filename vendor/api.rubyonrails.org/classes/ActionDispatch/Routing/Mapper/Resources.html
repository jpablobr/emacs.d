<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html 
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
  <head>
    <title>Module: ActionDispatch::Routing::Mapper::Resources</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="stylesheet" href="../../../../rdoc-style.css" type="text/css" media="screen" />

    <script language="JavaScript" type="text/javascript">
    // <![CDATA[

        function toggleSource( id )
        {
          var elem
          var link

          if( document.getElementById )
          {
            elem = document.getElementById( id )
            link = document.getElementById( "l_" + id )
          }
          else if ( document.all )
          {
            elem = eval( "document.all." + id )
            link = eval( "document.all.l_" + id )
          }
          else
            return false;

          if( elem.style.display == "block" )
          {
            elem.style.display = "none"
            link.innerHTML = "show source"
          }
          else
          {
            elem.style.display = "block"
            link.innerHTML = "hide source"
          }
        }

        function openCode( url )
        {
          window.open( url, "SOURCE_CODE", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=480,width=750" ).focus();
        }
      // ]]>
    </script>
  </head>

  <body>
    <table width="100%" border='0' cellpadding='0' cellspacing='0' class='banner'>
    <tr><td>Ruby on Rails v3.0.3</td></tr>
    <tr>
  <td class="file-title"><span class="file-title-prefix">Module</span><br />ActionDispatch::Routing::Mapper::Resources</td>
  <td align="right">
    <table cellspacing="0" cellpadding="2">
      <tr valign="top">
        <td>In:</td>
        <td>
<a href="../../../../files/actionpack/lib/action_dispatch/routing/mapper_rb.html">actionpack/lib/action_dispatch/routing/mapper.rb</a>:
        </td>
      </tr>
         </table>
        </td>
        </tr>
      </table>
  <div id="bodyContent">
  <div id="content">

  <div class="description"><p>
Resource routing allows you to quickly declare all of the common routes for
a given resourceful controller. Instead of declaring separate routes for
your <tt>index</tt>, <tt>show</tt>, <tt>new</tt>, <tt>edit</tt>,
<tt>create</tt>, <tt>update</tt> and <tt>destroy</tt> actions, a
resourceful route declares them in a single line of code:
</p>
<pre>
 resources :photos
</pre>
<p>
Sometimes, you have a resource that clients always look up without
referencing an ID. A common example, /profile always shows the profile of
the currently logged in user. In this case, you can use a singular resource
to map /profile (rather than /profile/:id) to the show action.
</p>
<pre>
 resource :profile
</pre>
<p>
It&#8217;s common to have resources that are logically children of other
resources:
</p>
<pre>
  resources :magazines do
    resources :ads
  end
</pre>
<p>
You may wish to organize groups of controllers under a namespace. Most
commonly, you might group a number of administrative controllers under an
<tt>admin</tt> namespace. You would place these controllers under the
app/controllers/admin directory, and you can group them together in your
router:
</p>
<pre>
  namespace &quot;admin&quot; do
    resources :posts, :comments
  end</pre>
</div>


  <div class="sectiontitle">Methods</div>
  <ul>
                <li><a href="#method-i-action_options%3F">action_options?</a></li>
                <li><a href="#method-i-action_path">action_path</a></li>
                <li><a href="#method-i-apply_common_behavior_for">apply_common_behavior_for</a></li>
                <li><a href="#method-i-canonical_action%3F">canonical_action?</a></li>
                <li><a href="#method-i-collection">collection</a></li>
                <li><a href="#method-i-id_constraint">id_constraint</a></li>
                <li><a href="#method-i-id_constraint%3F">id_constraint?</a></li>
                <li><a href="#method-i-match">match</a></li>
                <li><a href="#method-i-member">member</a></li>
                <li><a href="#method-i-name_for_action">name_for_action</a></li>
                <li><a href="#method-i-namespace">namespace</a></li>
                <li><a href="#method-i-nested">nested</a></li>
                <li><a href="#method-i-nested_options">nested_options</a></li>
                <li><a href="#method-i-new">new</a></li>
                <li><a href="#method-i-path_for_action">path_for_action</a></li>
                <li><a href="#method-i-prefix_name_for_action">prefix_name_for_action</a></li>
                <li><a href="#method-i-resource">resource</a></li>
                <li><a href="#method-i-resource_method_scope%3F">resource_method_scope?</a></li>
                <li><a href="#method-i-resource_scope">resource_scope</a></li>
                <li><a href="#method-i-resource_scope%3F">resource_scope?</a></li>
                <li><a href="#method-i-resources">resources</a></li>
                <li><a href="#method-i-resources_path_names">resources_path_names</a></li>
                <li><a href="#method-i-root">root</a></li>
                <li><a href="#method-i-scope_action_options">scope_action_options</a></li>
                <li><a href="#method-i-scope_action_options%3F">scope_action_options?</a></li>
                <li><a href="#method-i-shallow">shallow</a></li>
                <li><a href="#method-i-shallow%3F">shallow?</a></li>
                <li><a href="#method-i-shallow_scoping%3F">shallow_scoping?</a></li>
                <li><a href="#method-i-with_exclusive_scope">with_exclusive_scope</a></li>
                <li><a href="#method-i-with_scope_level">with_scope_level</a></li>
      </ul>


  <div class="sectiontitle">Constants</div>
  <table border='0' cellpadding='5'>
  <tr valign='top'>
    <td class="attr-name">VALID_ON_OPTIONS</td>
    <td>=</td>
    <td class="attr-value">[:new, :collection, :member]</td>
  </tr>
  <tr valign='top'>
    <td>&nbsp;</td>
    <td colspan="2" class="attr-desc"><p>
<a href="Resources.html#CANONICAL_ACTIONS">CANONICAL_ACTIONS</a> holds all
actions that does not need a prefix or a path appended since they fit
properly in their scope level.
</p></td>
  </tr>
  <tr valign='top'>
    <td class="attr-name">RESOURCE_OPTIONS</td>
    <td>=</td>
    <td class="attr-value">[:as, :controller, :path, :only, :except]</td>
  </tr>
  <tr valign='top'>
    <td class="attr-name">CANONICAL_ACTIONS</td>
    <td>=</td>
    <td class="attr-value">%w(index create new show update destroy)</td>
  </tr>
  </table>


                        
    <div class="sectiontitle">
      Public      Instance      methods
    </div>

          
      <div class="method">
        <div class="title">
                      <a name="method-i-collection"></a>
            <b>collection</b>()          
        </div>

                  <div class="description">
            <p>
To add a route to the collection:
</p>
<pre>
  resources :photos do
    collection do
      get 'search'
    end
  end
</pre>
<p>
This will enable <a href="../../../Rails.html">Rails</a> to recognize paths
such as <tt>/photos/search</tt> with GET, and route to the search action of
PhotosController. It will also create the <tt>search_photos_url</tt> and
<tt>search_photos_path</tt> route helpers.
</p>          </div>
        
        
                  <div class="sourcecode">
            <p class="source-link">[
            <a href="javascript:toggleSource('collection_source')"
                 id="l_method-i-collection_source">
              show source
            </a> ]</p>
            <div class="dyn-source"
                    id="collection_source">
<pre>
       <span class="ruby-comment cmt"># File actionpack/lib/action_dispatch/routing/mapper.rb, line 985</span>
985:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">collection</span>
986:           <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">resource_scope?</span>
987:             <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-value str">&quot;can't use collection outside resource(s) scope&quot;</span>
988:           <span class="ruby-keyword kw">end</span>
989: 
990:           <span class="ruby-identifier">with_scope_level</span>(<span class="ruby-value">:collection</span>) <span class="ruby-keyword kw">do</span>
991:             <span class="ruby-identifier">scope</span>(<span class="ruby-identifier">parent_resource</span>.<span class="ruby-identifier">collection_scope</span>) <span class="ruby-keyword kw">do</span>
992:               <span class="ruby-keyword kw">yield</span>
993:             <span class="ruby-keyword kw">end</span>
994:           <span class="ruby-keyword kw">end</span>
995:         <span class="ruby-keyword kw">end</span></pre>
            </div>
          </div>
        
      </div>

          
      <div class="method">
        <div class="title">
                      <a name="method-i-match"></a>
            <b>match</b>(*args)          
        </div>

                  <div class="description">
                      </div>
        
        
                  <div class="sourcecode">
            <p class="source-link">[
            <a href="javascript:toggleSource('match_source')"
                 id="l_method-i-match_source">
              show source
            </a> ]</p>
            <div class="dyn-source"
                    id="match_source">
<pre>
        <span class="ruby-comment cmt"># File actionpack/lib/action_dispatch/routing/mapper.rb, line 1072</span>
1072:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">match</span>(*<span class="ruby-identifier">args</span>)
1073:           <span class="ruby-identifier">options</span> = <span class="ruby-identifier">args</span>.<span class="ruby-identifier">extract_options!</span>.<span class="ruby-identifier">dup</span>
1074:           <span class="ruby-identifier">options</span>[<span class="ruby-value">:anchor</span>] = <span class="ruby-keyword kw">true</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">options</span>.<span class="ruby-identifier">key?</span>(<span class="ruby-value">:anchor</span>)
1075: 
1076:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">args</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">1</span>
1077:             <span class="ruby-identifier">args</span>.<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">path</span><span class="ruby-operator">|</span> <span class="ruby-identifier">match</span>(<span class="ruby-identifier">path</span>, <span class="ruby-identifier">options</span>.<span class="ruby-identifier">dup</span>) }
1078:             <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">self</span>
1079:           <span class="ruby-keyword kw">end</span>
1080: 
1081:           <span class="ruby-identifier">on</span> = <span class="ruby-identifier">options</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-value">:on</span>)
1082:           <span class="ruby-keyword kw">if</span> <span class="ruby-constant">VALID_ON_OPTIONS</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">on</span>)
1083:             <span class="ruby-identifier">args</span>.<span class="ruby-identifier">push</span>(<span class="ruby-identifier">options</span>)
1084:             <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">send</span>(<span class="ruby-identifier">on</span>){ <span class="ruby-identifier">match</span>(*<span class="ruby-identifier">args</span>) }
1085:           <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">on</span>
1086:             <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-node">&quot;Unknown scope #{on.inspect} given to :on&quot;</span>
1087:           <span class="ruby-keyword kw">end</span>
1088: 
1089:           <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@scope</span>[<span class="ruby-value">:scope_level</span>] <span class="ruby-operator">==</span> <span class="ruby-value">:resources</span>
1090:             <span class="ruby-identifier">args</span>.<span class="ruby-identifier">push</span>(<span class="ruby-identifier">options</span>)
1091:             <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">nested</span> { <span class="ruby-identifier">match</span>(*<span class="ruby-identifier">args</span>) }
1092:           <span class="ruby-keyword kw">elsif</span> <span class="ruby-ivar">@scope</span>[<span class="ruby-value">:scope_level</span>] <span class="ruby-operator">==</span> <span class="ruby-value">:resource</span>
1093:             <span class="ruby-identifier">args</span>.<span class="ruby-identifier">push</span>(<span class="ruby-identifier">options</span>)
1094:             <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">member</span> { <span class="ruby-identifier">match</span>(*<span class="ruby-identifier">args</span>) }
1095:           <span class="ruby-keyword kw">end</span>
1096: 
1097:           <span class="ruby-identifier">action</span> = <span class="ruby-identifier">args</span>.<span class="ruby-identifier">first</span>
1098:           <span class="ruby-identifier">path</span> = <span class="ruby-identifier">path_for_action</span>(<span class="ruby-identifier">action</span>, <span class="ruby-identifier">options</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-value">:path</span>))
1099: 
1100:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">action</span>.<span class="ruby-identifier">to_s</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/^[\w\/]+$/</span>
1101:             <span class="ruby-identifier">options</span>[<span class="ruby-value">:action</span>] <span class="ruby-operator">||=</span> <span class="ruby-identifier">action</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">action</span>.<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-value str">&quot;/&quot;</span>)
1102:           <span class="ruby-keyword kw">else</span>
1103:             <span class="ruby-identifier">action</span> = <span class="ruby-keyword kw">nil</span>
1104:           <span class="ruby-keyword kw">end</span>
1105: 
1106:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>.<span class="ruby-identifier">key?</span>(<span class="ruby-value">:as</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">options</span>[<span class="ruby-value">:as</span>]
1107:             <span class="ruby-identifier">options</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-value">:as</span>)
1108:           <span class="ruby-keyword kw">else</span>
1109:             <span class="ruby-identifier">options</span>[<span class="ruby-value">:as</span>] = <span class="ruby-identifier">name_for_action</span>(<span class="ruby-identifier">options</span>[<span class="ruby-value">:as</span>], <span class="ruby-identifier">action</span>)
1110:           <span class="ruby-keyword kw">end</span>
1111: 
1112:           <span class="ruby-keyword kw">super</span>(<span class="ruby-identifier">path</span>, <span class="ruby-identifier">options</span>)
1113:         <span class="ruby-keyword kw">end</span></pre>
            </div>
          </div>
        
      </div>

          
      <div class="method">
        <div class="title">
                      <a name="method-i-member"></a>
            <b>member</b>()          
        </div>

                  <div class="description">
            <p>
To add a member route, add a member block into the resource block:
</p>
<pre>
  resources :photos do
    member do
      get 'preview'
    end
  end
</pre>
<p>
This will recognize <tt>/photos/1/preview</tt> with GET, and route to the
preview action of PhotosController. It will also create the
<tt>preview_photo_url</tt> and <tt>preview_photo_path</tt> helpers.
</p>          </div>
        
        
                  <div class="sourcecode">
            <p class="source-link">[
            <a href="javascript:toggleSource('member_source')"
                 id="l_method-i-member_source">
              show source
            </a> ]</p>
            <div class="dyn-source"
                    id="member_source">
<pre>
        <span class="ruby-comment cmt"># File actionpack/lib/action_dispatch/routing/mapper.rb, line 1008</span>
1008:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">member</span>
1009:           <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">resource_scope?</span>
1010:             <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-value str">&quot;can't use member outside resource(s) scope&quot;</span>
1011:           <span class="ruby-keyword kw">end</span>
1012: 
1013:           <span class="ruby-identifier">with_scope_level</span>(<span class="ruby-value">:member</span>) <span class="ruby-keyword kw">do</span>
1014:             <span class="ruby-identifier">scope</span>(<span class="ruby-identifier">parent_resource</span>.<span class="ruby-identifier">member_scope</span>) <span class="ruby-keyword kw">do</span>
1015:               <span class="ruby-keyword kw">yield</span>
1016:             <span class="ruby-keyword kw">end</span>
1017:           <span class="ruby-keyword kw">end</span>
1018:         <span class="ruby-keyword kw">end</span></pre>
            </div>
          </div>
        
      </div>

          
      <div class="method">
        <div class="title">
                      <a name="method-i-namespace"></a>
            <b>namespace</b>(path, options = {})          
        </div>

                  <div class="description">
                      </div>
        
        
                  <div class="sourcecode">
            <p class="source-link">[
            <a href="javascript:toggleSource('namespace_source')"
                 id="l_method-i-namespace_source">
              show source
            </a> ]</p>
            <div class="dyn-source"
                    id="namespace_source">
<pre>
        <span class="ruby-comment cmt"># File actionpack/lib/action_dispatch/routing/mapper.rb, line 1054</span>
1054:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">namespace</span>(<span class="ruby-identifier">path</span>, <span class="ruby-identifier">options</span> = {})
1055:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">resource_scope?</span>
1056:             <span class="ruby-identifier">nested</span> { <span class="ruby-keyword kw">super</span> }
1057:           <span class="ruby-keyword kw">else</span>
1058:             <span class="ruby-keyword kw">super</span>
1059:           <span class="ruby-keyword kw">end</span>
1060:         <span class="ruby-keyword kw">end</span></pre>
            </div>
          </div>
        
      </div>

          
      <div class="method">
        <div class="title">
                      <a name="method-i-nested"></a>
            <b>nested</b>()          
        </div>

                  <div class="description">
                      </div>
        
        
                  <div class="sourcecode">
            <p class="source-link">[
            <a href="javascript:toggleSource('nested_source')"
                 id="l_method-i-nested_source">
              show source
            </a> ]</p>
            <div class="dyn-source"
                    id="nested_source">
<pre>
        <span class="ruby-comment cmt"># File actionpack/lib/action_dispatch/routing/mapper.rb, line 1032</span>
1032:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">nested</span>
1033:           <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">resource_scope?</span>
1034:             <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-value str">&quot;can't use nested outside resource(s) scope&quot;</span>
1035:           <span class="ruby-keyword kw">end</span>
1036: 
1037:           <span class="ruby-identifier">with_scope_level</span>(<span class="ruby-value">:nested</span>) <span class="ruby-keyword kw">do</span>
1038:             <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">shallow?</span>
1039:               <span class="ruby-identifier">with_exclusive_scope</span> <span class="ruby-keyword kw">do</span>
1040:                 <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@scope</span>[<span class="ruby-value">:shallow_path</span>].<span class="ruby-identifier">blank?</span>
1041:                   <span class="ruby-identifier">scope</span>(<span class="ruby-identifier">parent_resource</span>.<span class="ruby-identifier">nested_scope</span>, <span class="ruby-identifier">nested_options</span>) { <span class="ruby-keyword kw">yield</span> }
1042:                 <span class="ruby-keyword kw">else</span>
1043:                   <span class="ruby-identifier">scope</span>(<span class="ruby-ivar">@scope</span>[<span class="ruby-value">:shallow_path</span>], <span class="ruby-value">:as</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@scope</span>[<span class="ruby-value">:shallow_prefix</span>]) <span class="ruby-keyword kw">do</span>
1044:                     <span class="ruby-identifier">scope</span>(<span class="ruby-identifier">parent_resource</span>.<span class="ruby-identifier">nested_scope</span>, <span class="ruby-identifier">nested_options</span>) { <span class="ruby-keyword kw">yield</span> }
1045:                   <span class="ruby-keyword kw">end</span>
1046:                 <span class="ruby-keyword kw">end</span>
1047:               <span class="ruby-keyword kw">end</span>
1048:             <span class="ruby-keyword kw">else</span>
1049:               <span class="ruby-identifier">scope</span>(<span class="ruby-identifier">parent_resource</span>.<span class="ruby-identifier">nested_scope</span>, <span class="ruby-identifier">nested_options</span>) { <span class="ruby-keyword kw">yield</span> }
1050:             <span class="ruby-keyword kw">end</span>
1051:           <span class="ruby-keyword kw">end</span>
1052:         <span class="ruby-keyword kw">end</span></pre>
            </div>
          </div>
        
      </div>

          
      <div class="method">
        <div class="title">
                      <a name="method-i-new"></a>
            <b>new</b>()          
        </div>

                  <div class="description">
                      </div>
        
        
                  <div class="sourcecode">
            <p class="source-link">[
            <a href="javascript:toggleSource('new_source')"
                 id="l_method-i-new_source">
              show source
            </a> ]</p>
            <div class="dyn-source"
                    id="new_source">
<pre>
        <span class="ruby-comment cmt"># File actionpack/lib/action_dispatch/routing/mapper.rb, line 1020</span>
1020:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">new</span>
1021:           <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">resource_scope?</span>
1022:             <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-value str">&quot;can't use new outside resource(s) scope&quot;</span>
1023:           <span class="ruby-keyword kw">end</span>
1024: 
1025:           <span class="ruby-identifier">with_scope_level</span>(<span class="ruby-value">:new</span>) <span class="ruby-keyword kw">do</span>
1026:             <span class="ruby-identifier">scope</span>(<span class="ruby-identifier">parent_resource</span>.<span class="ruby-identifier">new_scope</span>(<span class="ruby-identifier">action_path</span>(<span class="ruby-value">:new</span>))) <span class="ruby-keyword kw">do</span>
1027:               <span class="ruby-keyword kw">yield</span>
1028:             <span class="ruby-keyword kw">end</span>
1029:           <span class="ruby-keyword kw">end</span>
1030:         <span class="ruby-keyword kw">end</span></pre>
            </div>
          </div>
        
      </div>

          
      <div class="method">
        <div class="title">
                      <a name="method-i-resource"></a>
            <b>resource</b>(*resources, &block)          
        </div>

                  <div class="description">
            <p>
Sometimes, you have a resource that clients always look up without
referencing an ID. A common example, /profile always shows the profile of
the currently logged in user. In this case, you can use a singular resource
to map /profile (rather than /profile/:id) to the show action:
</p>
<pre>
  resource :geocoder
</pre>
<p>
creates six different routes in your application, all mapping to the
GeoCoders controller (note that the controller is named after the plural):
</p>
<pre>
  GET     /geocoder/new
  POST    /geocoder
  GET     /geocoder
  GET     /geocoder/edit
  PUT     /geocoder
  DELETE  /geocoder</pre>          </div>
        
        
                  <div class="sourcecode">
            <p class="source-link">[
            <a href="javascript:toggleSource('resource_source')"
                 id="l_method-i-resource_source">
              show source
            </a> ]</p>
            <div class="dyn-source"
                    id="resource_source">
<pre>
       <span class="ruby-comment cmt"># File actionpack/lib/action_dispatch/routing/mapper.rb, line 890</span>
890:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">resource</span>(*<span class="ruby-identifier">resources</span>, &amp;<span class="ruby-identifier">block</span>)
891:           <span class="ruby-identifier">options</span> = <span class="ruby-identifier">resources</span>.<span class="ruby-identifier">extract_options!</span>
892: 
893:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">apply_common_behavior_for</span>(<span class="ruby-value">:resource</span>, <span class="ruby-identifier">resources</span>, <span class="ruby-identifier">options</span>, &amp;<span class="ruby-identifier">block</span>)
894:             <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">self</span>
895:           <span class="ruby-keyword kw">end</span>
896: 
897:           <span class="ruby-identifier">resource_scope</span>(<span class="ruby-constant">SingletonResource</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">resources</span>.<span class="ruby-identifier">pop</span>, <span class="ruby-identifier">options</span>)) <span class="ruby-keyword kw">do</span>
898:             <span class="ruby-keyword kw">yield</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">block_given?</span>
899: 
900:             <span class="ruby-identifier">collection</span> <span class="ruby-keyword kw">do</span>
901:               <span class="ruby-identifier">post</span> <span class="ruby-value">:create</span>
902:             <span class="ruby-keyword kw">end</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">parent_resource</span>.<span class="ruby-identifier">actions</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-value">:create</span>)
903: 
904:             <span class="ruby-identifier">new</span> <span class="ruby-keyword kw">do</span>
905:               <span class="ruby-identifier">get</span> <span class="ruby-value">:new</span>
906:             <span class="ruby-keyword kw">end</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">parent_resource</span>.<span class="ruby-identifier">actions</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-value">:new</span>)
907: 
908:             <span class="ruby-identifier">member</span> <span class="ruby-keyword kw">do</span>
909:               <span class="ruby-identifier">get</span>    <span class="ruby-value">:edit</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">parent_resource</span>.<span class="ruby-identifier">actions</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-value">:edit</span>)
910:               <span class="ruby-identifier">get</span>    <span class="ruby-value">:show</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">parent_resource</span>.<span class="ruby-identifier">actions</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-value">:show</span>)
911:               <span class="ruby-identifier">put</span>    <span class="ruby-value">:update</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">parent_resource</span>.<span class="ruby-identifier">actions</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-value">:update</span>)
912:               <span class="ruby-identifier">delete</span> <span class="ruby-value">:destroy</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">parent_resource</span>.<span class="ruby-identifier">actions</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-value">:destroy</span>)
913:             <span class="ruby-keyword kw">end</span>
914:           <span class="ruby-keyword kw">end</span>
915: 
916:           <span class="ruby-keyword kw">self</span>
917:         <span class="ruby-keyword kw">end</span></pre>
            </div>
          </div>
        
      </div>

          
      <div class="method">
        <div class="title">
                      <a name="method-i-resources"></a>
            <b>resources</b>(*resources, &block)          
        </div>

                  <div class="description">
            <p>
In <a href="../../../Rails.html">Rails</a>, a resourceful route provides a
mapping between HTTP verbs and URLs and controller actions. By convention,
each action also maps to particular CRUD operations in a database. A single
entry in the routing file, such as
</p>
<pre>
  resources :photos
</pre>
<p>
creates seven different routes in your application, all mapping to the
Photos controller:
</p>
<pre>
  GET     /photos/new
  POST    /photos
  GET     /photos/:id
  GET     /photos/:id/edit
  PUT     /photos/:id
  DELETE  /photos/:id
</pre>
<h3>Supported options</h3>
<dl>
<dt>:path_names</dt><dd><p>
Allows you to change the paths of the seven default actions. Paths not
specified are not changed.
</p>
<pre>
  resources :posts, :path_names =&gt; { :new =&gt; &quot;brand_new&quot; }
</pre>
<p>
The above example will now change /posts/new to /posts/brand_new
</p>
</dd>
</dl>          </div>
        
        
                  <div class="sourcecode">
            <p class="source-link">[
            <a href="javascript:toggleSource('resources_source')"
                 id="l_method-i-resources_source">
              show source
            </a> ]</p>
            <div class="dyn-source"
                    id="resources_source">
<pre>
       <span class="ruby-comment cmt"># File actionpack/lib/action_dispatch/routing/mapper.rb, line 943</span>
943:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">resources</span>(*<span class="ruby-identifier">resources</span>, &amp;<span class="ruby-identifier">block</span>)
944:           <span class="ruby-identifier">options</span> = <span class="ruby-identifier">resources</span>.<span class="ruby-identifier">extract_options!</span>
945: 
946:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">apply_common_behavior_for</span>(<span class="ruby-value">:resources</span>, <span class="ruby-identifier">resources</span>, <span class="ruby-identifier">options</span>, &amp;<span class="ruby-identifier">block</span>)
947:             <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">self</span>
948:           <span class="ruby-keyword kw">end</span>
949: 
950:           <span class="ruby-identifier">resource_scope</span>(<span class="ruby-constant">Resource</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">resources</span>.<span class="ruby-identifier">pop</span>, <span class="ruby-identifier">options</span>)) <span class="ruby-keyword kw">do</span>
951:             <span class="ruby-keyword kw">yield</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">block_given?</span>
952: 
953:             <span class="ruby-identifier">collection</span> <span class="ruby-keyword kw">do</span>
954:               <span class="ruby-identifier">get</span>  <span class="ruby-value">:index</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">parent_resource</span>.<span class="ruby-identifier">actions</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-value">:index</span>)
955:               <span class="ruby-identifier">post</span> <span class="ruby-value">:create</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">parent_resource</span>.<span class="ruby-identifier">actions</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-value">:create</span>)
956:             <span class="ruby-keyword kw">end</span>
957: 
958:             <span class="ruby-identifier">new</span> <span class="ruby-keyword kw">do</span>
959:               <span class="ruby-identifier">get</span> <span class="ruby-value">:new</span>
960:             <span class="ruby-keyword kw">end</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">parent_resource</span>.<span class="ruby-identifier">actions</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-value">:new</span>)
961: 
962:             <span class="ruby-identifier">member</span> <span class="ruby-keyword kw">do</span>
963:               <span class="ruby-identifier">get</span>    <span class="ruby-value">:edit</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">parent_resource</span>.<span class="ruby-identifier">actions</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-value">:edit</span>)
964:               <span class="ruby-identifier">get</span>    <span class="ruby-value">:show</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">parent_resource</span>.<span class="ruby-identifier">actions</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-value">:show</span>)
965:               <span class="ruby-identifier">put</span>    <span class="ruby-value">:update</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">parent_resource</span>.<span class="ruby-identifier">actions</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-value">:update</span>)
966:               <span class="ruby-identifier">delete</span> <span class="ruby-value">:destroy</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">parent_resource</span>.<span class="ruby-identifier">actions</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-value">:destroy</span>)
967:             <span class="ruby-keyword kw">end</span>
968:           <span class="ruby-keyword kw">end</span>
969: 
970:           <span class="ruby-keyword kw">self</span>
971:         <span class="ruby-keyword kw">end</span></pre>
            </div>
          </div>
        
      </div>

          
      <div class="method">
        <div class="title">
                      <a name="method-i-resources_path_names"></a>
            <b>resources_path_names</b>(options)          
        </div>

                  <div class="description">
                      </div>
        
        
                  <div class="sourcecode">
            <p class="source-link">[
            <a href="javascript:toggleSource('resources-path-names_source')"
                 id="l_method-i-resources_path_names_source">
              show source
            </a> ]</p>
            <div class="dyn-source"
                    id="resources-path-names_source">
<pre>
       <span class="ruby-comment cmt"># File actionpack/lib/action_dispatch/routing/mapper.rb, line 868</span>
868:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">resources_path_names</span>(<span class="ruby-identifier">options</span>)
869:           <span class="ruby-ivar">@scope</span>[<span class="ruby-value">:path_names</span>].<span class="ruby-identifier">merge!</span>(<span class="ruby-identifier">options</span>)
870:         <span class="ruby-keyword kw">end</span></pre>
            </div>
          </div>
        
      </div>

          
      <div class="method">
        <div class="title">
                      <a name="method-i-root"></a>
            <b>root</b>(options={})          
        </div>

                  <div class="description">
                      </div>
        
        
                  <div class="sourcecode">
            <p class="source-link">[
            <a href="javascript:toggleSource('root_source')"
                 id="l_method-i-root_source">
              show source
            </a> ]</p>
            <div class="dyn-source"
                    id="root_source">
<pre>
        <span class="ruby-comment cmt"># File actionpack/lib/action_dispatch/routing/mapper.rb, line 1115</span>
1115:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">root</span>(<span class="ruby-identifier">options</span>={})
1116:           <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@scope</span>[<span class="ruby-value">:scope_level</span>] <span class="ruby-operator">==</span> <span class="ruby-value">:resources</span>
1117:             <span class="ruby-identifier">with_scope_level</span>(<span class="ruby-value">:root</span>) <span class="ruby-keyword kw">do</span>
1118:               <span class="ruby-identifier">scope</span>(<span class="ruby-identifier">parent_resource</span>.<span class="ruby-identifier">path</span>) <span class="ruby-keyword kw">do</span>
1119:                 <span class="ruby-keyword kw">super</span>(<span class="ruby-identifier">options</span>)
1120:               <span class="ruby-keyword kw">end</span>
1121:             <span class="ruby-keyword kw">end</span>
1122:           <span class="ruby-keyword kw">else</span>
1123:             <span class="ruby-keyword kw">super</span>(<span class="ruby-identifier">options</span>)
1124:           <span class="ruby-keyword kw">end</span>
1125:         <span class="ruby-keyword kw">end</span></pre>
            </div>
          </div>
        
      </div>

          
      <div class="method">
        <div class="title">
                      <a name="method-i-shallow"></a>
            <b>shallow</b>()          
        </div>

                  <div class="description">
                      </div>
        
        
                  <div class="sourcecode">
            <p class="source-link">[
            <a href="javascript:toggleSource('shallow_source')"
                 id="l_method-i-shallow_source">
              show source
            </a> ]</p>
            <div class="dyn-source"
                    id="shallow_source">
<pre>
        <span class="ruby-comment cmt"># File actionpack/lib/action_dispatch/routing/mapper.rb, line 1062</span>
1062:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">shallow</span>
1063:           <span class="ruby-identifier">scope</span>(<span class="ruby-value">:shallow</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>) <span class="ruby-keyword kw">do</span>
1064:             <span class="ruby-keyword kw">yield</span>
1065:           <span class="ruby-keyword kw">end</span>
1066:         <span class="ruby-keyword kw">end</span></pre>
            </div>
          </div>
        
      </div>

          
      <div class="method">
        <div class="title">
                      <a name="method-i-shallow%3F"></a>
            <b>shallow?</b>()          
        </div>

                  <div class="description">
                      </div>
        
        
                  <div class="sourcecode">
            <p class="source-link">[
            <a href="javascript:toggleSource('shallow-_source')"
                 id="l_method-i-shallow%3F_source">
              show source
            </a> ]</p>
            <div class="dyn-source"
                    id="shallow-_source">
<pre>
        <span class="ruby-comment cmt"># File actionpack/lib/action_dispatch/routing/mapper.rb, line 1068</span>
1068:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">shallow?</span>
1069:           <span class="ruby-identifier">parent_resource</span>.<span class="ruby-identifier">instance_of?</span>(<span class="ruby-constant">Resource</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@scope</span>[<span class="ruby-value">:shallow</span>]
1070:         <span class="ruby-keyword kw">end</span></pre>
            </div>
          </div>
        
      </div>

          
    <div class="sectiontitle">
      Protected      Instance      methods
    </div>

          
      <div class="method">
        <div class="title">
                      <a name="method-i-action_options%3F"></a>
            <b>action_options?</b>(options)          
        </div>

                  <div class="description">
                      </div>
        
        
                  <div class="sourcecode">
            <p class="source-link">[
            <a href="javascript:toggleSource('action-options-_source')"
                 id="l_method-i-action_options%3F_source">
              show source
            </a> ]</p>
            <div class="dyn-source"
                    id="action-options-_source">
<pre>
        <span class="ruby-comment cmt"># File actionpack/lib/action_dispatch/routing/mapper.rb, line 1163</span>
1163:           <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">action_options?</span>(<span class="ruby-identifier">options</span>)
1164:             <span class="ruby-identifier">options</span>[<span class="ruby-value">:only</span>] <span class="ruby-operator">||</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:except</span>]
1165:           <span class="ruby-keyword kw">end</span></pre>
            </div>
          </div>
        
      </div>

          
      <div class="method">
        <div class="title">
                      <a name="method-i-action_path"></a>
            <b>action_path</b>(name, path = nil)          
        </div>

                  <div class="description">
                      </div>
        
        
                  <div class="sourcecode">
            <p class="source-link">[
            <a href="javascript:toggleSource('action-path_source')"
                 id="l_method-i-action_path_source">
              show source
            </a> ]</p>
            <div class="dyn-source"
                    id="action-path_source">
<pre>
        <span class="ruby-comment cmt"># File actionpack/lib/action_dispatch/routing/mapper.rb, line 1247</span>
1247:           <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">action_path</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">path</span> = <span class="ruby-keyword kw">nil</span>)
1248:             <span class="ruby-identifier">path</span> <span class="ruby-operator">||</span> <span class="ruby-ivar">@scope</span>[<span class="ruby-value">:path_names</span>][<span class="ruby-identifier">name</span>.<span class="ruby-identifier">to_sym</span>] <span class="ruby-operator">||</span> <span class="ruby-identifier">name</span>.<span class="ruby-identifier">to_s</span>
1249:           <span class="ruby-keyword kw">end</span></pre>
            </div>
          </div>
        
      </div>

          
      <div class="method">
        <div class="title">
                      <a name="method-i-apply_common_behavior_for"></a>
            <b>apply_common_behavior_for</b>(method, resources, options, &block)          
        </div>

                  <div class="description">
                      </div>
        
        
                  <div class="sourcecode">
            <p class="source-link">[
            <a href="javascript:toggleSource('apply-common-behavior-for_source')"
                 id="l_method-i-apply_common_behavior_for_source">
              show source
            </a> ]</p>
            <div class="dyn-source"
                    id="apply-common-behavior-for_source">
<pre>
        <span class="ruby-comment cmt"># File actionpack/lib/action_dispatch/routing/mapper.rb, line 1133</span>
1133:           <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">apply_common_behavior_for</span>(<span class="ruby-identifier">method</span>, <span class="ruby-identifier">resources</span>, <span class="ruby-identifier">options</span>, &amp;<span class="ruby-identifier">block</span>)
1134:             <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">resources</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">1</span>
1135:               <span class="ruby-identifier">resources</span>.<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">r</span><span class="ruby-operator">|</span> <span class="ruby-identifier">send</span>(<span class="ruby-identifier">method</span>, <span class="ruby-identifier">r</span>, <span class="ruby-identifier">options</span>, &amp;<span class="ruby-identifier">block</span>) }
1136:               <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">true</span>
1137:             <span class="ruby-keyword kw">end</span>
1138: 
1139:             <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">resource_scope?</span>
1140:               <span class="ruby-identifier">nested</span> { <span class="ruby-identifier">send</span>(<span class="ruby-identifier">method</span>, <span class="ruby-identifier">resources</span>.<span class="ruby-identifier">pop</span>, <span class="ruby-identifier">options</span>, &amp;<span class="ruby-identifier">block</span>) }
1141:               <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">true</span>
1142:             <span class="ruby-keyword kw">end</span>
1143: 
1144:             <span class="ruby-identifier">options</span>.<span class="ruby-identifier">keys</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">k</span><span class="ruby-operator">|</span>
1145:               (<span class="ruby-identifier">options</span>[<span class="ruby-value">:constraints</span>] <span class="ruby-operator">||=</span> {})[<span class="ruby-identifier">k</span>] = <span class="ruby-identifier">options</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-identifier">k</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">k</span>].<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Regexp</span>)
1146:             <span class="ruby-keyword kw">end</span>
1147: 
1148:             <span class="ruby-identifier">scope_options</span> = <span class="ruby-identifier">options</span>.<span class="ruby-identifier">slice!</span>(*<span class="ruby-constant">RESOURCE_OPTIONS</span>)
1149:             <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">scope_options</span>.<span class="ruby-identifier">empty?</span>
1150:               <span class="ruby-identifier">scope</span>(<span class="ruby-identifier">scope_options</span>) <span class="ruby-keyword kw">do</span>
1151:                 <span class="ruby-identifier">send</span>(<span class="ruby-identifier">method</span>, <span class="ruby-identifier">resources</span>.<span class="ruby-identifier">pop</span>, <span class="ruby-identifier">options</span>, &amp;<span class="ruby-identifier">block</span>)
1152:               <span class="ruby-keyword kw">end</span>
1153:               <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">true</span>
1154:             <span class="ruby-keyword kw">end</span>
1155: 
1156:             <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">action_options?</span>(<span class="ruby-identifier">options</span>)
1157:               <span class="ruby-identifier">options</span>.<span class="ruby-identifier">merge!</span>(<span class="ruby-identifier">scope_action_options</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">scope_action_options?</span>
1158:             <span class="ruby-keyword kw">end</span>
1159: 
1160:             <span class="ruby-keyword kw">false</span>
1161:           <span class="ruby-keyword kw">end</span></pre>
            </div>
          </div>
        
      </div>

          
      <div class="method">
        <div class="title">
                      <a name="method-i-canonical_action%3F"></a>
            <b>canonical_action?</b>(action, flag)          
        </div>

                  <div class="description">
                      </div>
        
        
                  <div class="sourcecode">
            <p class="source-link">[
            <a href="javascript:toggleSource('canonical-action-_source')"
                 id="l_method-i-canonical_action%3F_source">
              show source
            </a> ]</p>
            <div class="dyn-source"
                    id="canonical-action-_source">
<pre>
        <span class="ruby-comment cmt"># File actionpack/lib/action_dispatch/routing/mapper.rb, line 1228</span>
1228:           <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">canonical_action?</span>(<span class="ruby-identifier">action</span>, <span class="ruby-identifier">flag</span>)
1229:             <span class="ruby-identifier">flag</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">resource_method_scope?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-constant">CANONICAL_ACTIONS</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">action</span>.<span class="ruby-identifier">to_s</span>)
1230:           <span class="ruby-keyword kw">end</span></pre>
            </div>
          </div>
        
      </div>

          
      <div class="method">
        <div class="title">
                      <a name="method-i-id_constraint"></a>
            <b>id_constraint</b>()          
        </div>

                  <div class="description">
                      </div>
        
        
                  <div class="sourcecode">
            <p class="source-link">[
            <a href="javascript:toggleSource('id-constraint_source')"
                 id="l_method-i-id_constraint_source">
              show source
            </a> ]</p>
            <div class="dyn-source"
                    id="id-constraint_source">
<pre>
        <span class="ruby-comment cmt"># File actionpack/lib/action_dispatch/routing/mapper.rb, line 1224</span>
1224:           <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">id_constraint</span>
1225:             <span class="ruby-ivar">@scope</span>[<span class="ruby-value">:constraints</span>][<span class="ruby-value">:id</span>]
1226:           <span class="ruby-keyword kw">end</span></pre>
            </div>
          </div>
        
      </div>

          
      <div class="method">
        <div class="title">
                      <a name="method-i-id_constraint%3F"></a>
            <b>id_constraint?</b>()          
        </div>

                  <div class="description">
                      </div>
        
        
                  <div class="sourcecode">
            <p class="source-link">[
            <a href="javascript:toggleSource('id-constraint-_source')"
                 id="l_method-i-id_constraint%3F_source">
              show source
            </a> ]</p>
            <div class="dyn-source"
                    id="id-constraint-_source">
<pre>
        <span class="ruby-comment cmt"># File actionpack/lib/action_dispatch/routing/mapper.rb, line 1220</span>
1220:           <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">id_constraint?</span>
1221:             <span class="ruby-ivar">@scope</span>[<span class="ruby-value">:constraints</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@scope</span>[<span class="ruby-value">:constraints</span>][<span class="ruby-value">:id</span>].<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Regexp</span>)
1222:           <span class="ruby-keyword kw">end</span></pre>
            </div>
          </div>
        
      </div>

          
      <div class="method">
        <div class="title">
                      <a name="method-i-name_for_action"></a>
            <b>name_for_action</b>(as, action)          
        </div>

                  <div class="description">
                      </div>
        
        
                  <div class="sourcecode">
            <p class="source-link">[
            <a href="javascript:toggleSource('name-for-action_source')"
                 id="l_method-i-name_for_action_source">
              show source
            </a> ]</p>
            <div class="dyn-source"
                    id="name-for-action_source">
<pre>
        <span class="ruby-comment cmt"># File actionpack/lib/action_dispatch/routing/mapper.rb, line 1259</span>
1259:           <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">name_for_action</span>(<span class="ruby-identifier">as</span>, <span class="ruby-identifier">action</span>)
1260:             <span class="ruby-identifier">prefix</span> = <span class="ruby-identifier">prefix_name_for_action</span>(<span class="ruby-identifier">as</span>, <span class="ruby-identifier">action</span>)
1261:             <span class="ruby-identifier">prefix</span> = <span class="ruby-constant">Mapper</span>.<span class="ruby-identifier">normalize_name</span>(<span class="ruby-identifier">prefix</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">prefix</span>
1262:             <span class="ruby-identifier">name_prefix</span> = <span class="ruby-ivar">@scope</span>[<span class="ruby-value">:as</span>]
1263: 
1264:             <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">parent_resource</span>
1265:               <span class="ruby-identifier">collection_name</span> = <span class="ruby-identifier">parent_resource</span>.<span class="ruby-identifier">collection_name</span>
1266:               <span class="ruby-identifier">member_name</span> = <span class="ruby-identifier">parent_resource</span>.<span class="ruby-identifier">member_name</span>
1267:             <span class="ruby-keyword kw">end</span>
1268: 
1269:             <span class="ruby-identifier">name</span> = <span class="ruby-keyword kw">case</span> <span class="ruby-ivar">@scope</span>[<span class="ruby-value">:scope_level</span>]
1270:             <span class="ruby-keyword kw">when</span> <span class="ruby-value">:nested</span>
1271:               [<span class="ruby-identifier">member_name</span>, <span class="ruby-identifier">prefix</span>]
1272:             <span class="ruby-keyword kw">when</span> <span class="ruby-value">:collection</span>
1273:               [<span class="ruby-identifier">prefix</span>, <span class="ruby-identifier">name_prefix</span>, <span class="ruby-identifier">collection_name</span>]
1274:             <span class="ruby-keyword kw">when</span> <span class="ruby-value">:new</span>
1275:               [<span class="ruby-identifier">prefix</span>, <span class="ruby-value">:new</span>, <span class="ruby-identifier">name_prefix</span>, <span class="ruby-identifier">member_name</span>]
1276:             <span class="ruby-keyword kw">when</span> <span class="ruby-value">:member</span>
1277:               [<span class="ruby-identifier">prefix</span>, <span class="ruby-identifier">shallow_scoping?</span> <span class="ruby-operator">?</span> <span class="ruby-ivar">@scope</span>[<span class="ruby-value">:shallow_prefix</span>] <span class="ruby-operator">:</span> <span class="ruby-identifier">name_prefix</span>, <span class="ruby-identifier">member_name</span>]
1278:             <span class="ruby-keyword kw">when</span> <span class="ruby-value">:root</span>
1279:               [<span class="ruby-identifier">name_prefix</span>, <span class="ruby-identifier">collection_name</span>, <span class="ruby-identifier">prefix</span>]
1280:             <span class="ruby-keyword kw">else</span>
1281:               [<span class="ruby-identifier">name_prefix</span>, <span class="ruby-identifier">member_name</span>, <span class="ruby-identifier">prefix</span>]
1282:             <span class="ruby-keyword kw">end</span>
1283: 
1284:             <span class="ruby-identifier">candidate</span> = <span class="ruby-identifier">name</span>.<span class="ruby-identifier">select</span>(&amp;<span class="ruby-value">:present?</span>).<span class="ruby-identifier">join</span>(<span class="ruby-value str">&quot;_&quot;</span>).<span class="ruby-identifier">presence</span>
1285:             <span class="ruby-identifier">candidate</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">as</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@set</span>.<span class="ruby-identifier">routes</span>.<span class="ruby-identifier">find</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">r</span><span class="ruby-operator">|</span> <span class="ruby-identifier">r</span>.<span class="ruby-identifier">name</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">candidate</span> }
1286:           <span class="ruby-keyword kw">end</span></pre>
            </div>
          </div>
        
      </div>

          
      <div class="method">
        <div class="title">
                      <a name="method-i-nested_options"></a>
            <b>nested_options</b>()          
        </div>

                  <div class="description">
                      </div>
        
        
                  <div class="sourcecode">
            <p class="source-link">[
            <a href="javascript:toggleSource('nested-options_source')"
                 id="l_method-i-nested_options_source">
              show source
            </a> ]</p>
            <div class="dyn-source"
                    id="nested-options_source">
<pre>
        <span class="ruby-comment cmt"># File actionpack/lib/action_dispatch/routing/mapper.rb, line 1213</span>
1213:           <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">nested_options</span>
1214:             {}.<span class="ruby-identifier">tap</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">options</span><span class="ruby-operator">|</span>
1215:               <span class="ruby-identifier">options</span>[<span class="ruby-value">:as</span>] = <span class="ruby-identifier">parent_resource</span>.<span class="ruby-identifier">member_name</span>
1216:               <span class="ruby-identifier">options</span>[<span class="ruby-value">:constraints</span>] = { <span class="ruby-node">&quot;#{parent_resource.singular}_id&quot;</span>.<span class="ruby-identifier">to_sym</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">id_constraint</span> } <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">id_constraint?</span>
1217:             <span class="ruby-keyword kw">end</span>
1218:           <span class="ruby-keyword kw">end</span></pre>
            </div>
          </div>
        
      </div>

          
      <div class="method">
        <div class="title">
                      <a name="method-i-path_for_action"></a>
            <b>path_for_action</b>(action, path)          
        </div>

                  <div class="description">
                      </div>
        
        
                  <div class="sourcecode">
            <p class="source-link">[
            <a href="javascript:toggleSource('path-for-action_source')"
                 id="l_method-i-path_for_action_source">
              show source
            </a> ]</p>
            <div class="dyn-source"
                    id="path-for-action_source">
<pre>
        <span class="ruby-comment cmt"># File actionpack/lib/action_dispatch/routing/mapper.rb, line 1236</span>
1236:           <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">path_for_action</span>(<span class="ruby-identifier">action</span>, <span class="ruby-identifier">path</span>)
1237:             <span class="ruby-identifier">prefix</span> = <span class="ruby-identifier">shallow_scoping?</span> <span class="ruby-operator">?</span>
1238:               <span class="ruby-node">&quot;#{@scope[:shallow_path]}/#{parent_resource.path}/:id&quot;</span> <span class="ruby-operator">:</span> <span class="ruby-ivar">@scope</span>[<span class="ruby-value">:path</span>]
1239: 
1240:             <span class="ruby-identifier">path</span> = <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">canonical_action?</span>(<span class="ruby-identifier">action</span>, <span class="ruby-identifier">path</span>.<span class="ruby-identifier">blank?</span>)
1241:               <span class="ruby-identifier">prefix</span>.<span class="ruby-identifier">to_s</span>
1242:             <span class="ruby-keyword kw">else</span>
1243:               <span class="ruby-node">&quot;#{prefix}/#{action_path(action, path)}&quot;</span>
1244:             <span class="ruby-keyword kw">end</span>
1245:           <span class="ruby-keyword kw">end</span></pre>
            </div>
          </div>
        
      </div>

          
      <div class="method">
        <div class="title">
                      <a name="method-i-prefix_name_for_action"></a>
            <b>prefix_name_for_action</b>(as, action)          
        </div>

                  <div class="description">
                      </div>
        
        
                  <div class="sourcecode">
            <p class="source-link">[
            <a href="javascript:toggleSource('prefix-name-for-action_source')"
                 id="l_method-i-prefix_name_for_action_source">
              show source
            </a> ]</p>
            <div class="dyn-source"
                    id="prefix-name-for-action_source">
<pre>
        <span class="ruby-comment cmt"># File actionpack/lib/action_dispatch/routing/mapper.rb, line 1251</span>
1251:           <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">prefix_name_for_action</span>(<span class="ruby-identifier">as</span>, <span class="ruby-identifier">action</span>)
1252:             <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">as</span>
1253:               <span class="ruby-identifier">as</span>.<span class="ruby-identifier">to_s</span>
1254:             <span class="ruby-keyword kw">elsif</span> <span class="ruby-operator">!</span><span class="ruby-identifier">canonical_action?</span>(<span class="ruby-identifier">action</span>, <span class="ruby-ivar">@scope</span>[<span class="ruby-value">:scope_level</span>])
1255:               <span class="ruby-identifier">action</span>.<span class="ruby-identifier">to_s</span>
1256:             <span class="ruby-keyword kw">end</span>
1257:           <span class="ruby-keyword kw">end</span></pre>
            </div>
          </div>
        
      </div>

          
      <div class="method">
        <div class="title">
                      <a name="method-i-resource_method_scope%3F"></a>
            <b>resource_method_scope?</b>()          
        </div>

                  <div class="description">
                      </div>
        
        
                  <div class="sourcecode">
            <p class="source-link">[
            <a href="javascript:toggleSource('resource-method-scope-_source')"
                 id="l_method-i-resource_method_scope%3F_source">
              show source
            </a> ]</p>
            <div class="dyn-source"
                    id="resource-method-scope-_source">
<pre>
        <span class="ruby-comment cmt"># File actionpack/lib/action_dispatch/routing/mapper.rb, line 1179</span>
1179:           <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">resource_method_scope?</span>
1180:             [<span class="ruby-value">:collection</span>, <span class="ruby-value">:member</span>, <span class="ruby-value">:new</span>].<span class="ruby-identifier">include?</span>(<span class="ruby-ivar">@scope</span>[<span class="ruby-value">:scope_level</span>])
1181:           <span class="ruby-keyword kw">end</span></pre>
            </div>
          </div>
        
      </div>

          
      <div class="method">
        <div class="title">
                      <a name="method-i-resource_scope"></a>
            <b>resource_scope</b>(resource)          
        </div>

                  <div class="description">
                      </div>
        
        
                  <div class="sourcecode">
            <p class="source-link">[
            <a href="javascript:toggleSource('resource-scope_source')"
                 id="l_method-i-resource_scope_source">
              show source
            </a> ]</p>
            <div class="dyn-source"
                    id="resource-scope_source">
<pre>
        <span class="ruby-comment cmt"># File actionpack/lib/action_dispatch/routing/mapper.rb, line 1205</span>
1205:           <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">resource_scope</span>(<span class="ruby-identifier">resource</span>)
1206:             <span class="ruby-identifier">with_scope_level</span>(<span class="ruby-identifier">resource</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">SingletonResource</span>) <span class="ruby-operator">?</span> <span class="ruby-value">:resource</span> <span class="ruby-operator">:</span> <span class="ruby-value">:resources</span>, <span class="ruby-identifier">resource</span>) <span class="ruby-keyword kw">do</span>
1207:               <span class="ruby-identifier">scope</span>(<span class="ruby-identifier">parent_resource</span>.<span class="ruby-identifier">resource_scope</span>) <span class="ruby-keyword kw">do</span>
1208:                 <span class="ruby-keyword kw">yield</span>
1209:               <span class="ruby-keyword kw">end</span>
1210:             <span class="ruby-keyword kw">end</span>
1211:           <span class="ruby-keyword kw">end</span></pre>
            </div>
          </div>
        
      </div>

          
      <div class="method">
        <div class="title">
                      <a name="method-i-resource_scope%3F"></a>
            <b>resource_scope?</b>()          
        </div>

                  <div class="description">
                      </div>
        
        
                  <div class="sourcecode">
            <p class="source-link">[
            <a href="javascript:toggleSource('resource-scope-_source')"
                 id="l_method-i-resource_scope%3F_source">
              show source
            </a> ]</p>
            <div class="dyn-source"
                    id="resource-scope-_source">
<pre>
        <span class="ruby-comment cmt"># File actionpack/lib/action_dispatch/routing/mapper.rb, line 1175</span>
1175:           <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">resource_scope?</span>
1176:             [<span class="ruby-value">:resource</span>, <span class="ruby-value">:resources</span>].<span class="ruby-identifier">include?</span>(<span class="ruby-ivar">@scope</span>[<span class="ruby-value">:scope_level</span>])
1177:           <span class="ruby-keyword kw">end</span></pre>
            </div>
          </div>
        
      </div>

          
      <div class="method">
        <div class="title">
                      <a name="method-i-scope_action_options"></a>
            <b>scope_action_options</b>()          
        </div>

                  <div class="description">
                      </div>
        
        
                  <div class="sourcecode">
            <p class="source-link">[
            <a href="javascript:toggleSource('scope-action-options_source')"
                 id="l_method-i-scope_action_options_source">
              show source
            </a> ]</p>
            <div class="dyn-source"
                    id="scope-action-options_source">
<pre>
        <span class="ruby-comment cmt"># File actionpack/lib/action_dispatch/routing/mapper.rb, line 1171</span>
1171:           <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">scope_action_options</span>
1172:             <span class="ruby-ivar">@scope</span>[<span class="ruby-value">:options</span>].<span class="ruby-identifier">slice</span>(<span class="ruby-value">:only</span>, <span class="ruby-value">:except</span>)
1173:           <span class="ruby-keyword kw">end</span></pre>
            </div>
          </div>
        
      </div>

          
      <div class="method">
        <div class="title">
                      <a name="method-i-scope_action_options%3F"></a>
            <b>scope_action_options?</b>()          
        </div>

                  <div class="description">
                      </div>
        
        
                  <div class="sourcecode">
            <p class="source-link">[
            <a href="javascript:toggleSource('scope-action-options-_source')"
                 id="l_method-i-scope_action_options%3F_source">
              show source
            </a> ]</p>
            <div class="dyn-source"
                    id="scope-action-options-_source">
<pre>
        <span class="ruby-comment cmt"># File actionpack/lib/action_dispatch/routing/mapper.rb, line 1167</span>
1167:           <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">scope_action_options?</span>
1168:             <span class="ruby-ivar">@scope</span>[<span class="ruby-value">:options</span>].<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Hash</span>) <span class="ruby-operator">&amp;&amp;</span> (<span class="ruby-ivar">@scope</span>[<span class="ruby-value">:options</span>][<span class="ruby-value">:only</span>] <span class="ruby-operator">||</span> <span class="ruby-ivar">@scope</span>[<span class="ruby-value">:options</span>][<span class="ruby-value">:except</span>])
1169:           <span class="ruby-keyword kw">end</span></pre>
            </div>
          </div>
        
      </div>

          
      <div class="method">
        <div class="title">
                      <a name="method-i-shallow_scoping%3F"></a>
            <b>shallow_scoping?</b>()          
        </div>

                  <div class="description">
                      </div>
        
        
                  <div class="sourcecode">
            <p class="source-link">[
            <a href="javascript:toggleSource('shallow-scoping-_source')"
                 id="l_method-i-shallow_scoping%3F_source">
              show source
            </a> ]</p>
            <div class="dyn-source"
                    id="shallow-scoping-_source">
<pre>
        <span class="ruby-comment cmt"># File actionpack/lib/action_dispatch/routing/mapper.rb, line 1232</span>
1232:           <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">shallow_scoping?</span>
1233:             <span class="ruby-identifier">shallow?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@scope</span>[<span class="ruby-value">:scope_level</span>] <span class="ruby-operator">==</span> <span class="ruby-value">:member</span>
1234:           <span class="ruby-keyword kw">end</span></pre>
            </div>
          </div>
        
      </div>

          
      <div class="method">
        <div class="title">
                      <a name="method-i-with_exclusive_scope"></a>
            <b>with_exclusive_scope</b>()          
        </div>

                  <div class="description">
                      </div>
        
        
                  <div class="sourcecode">
            <p class="source-link">[
            <a href="javascript:toggleSource('with-exclusive-scope_source')"
                 id="l_method-i-with_exclusive_scope_source">
              show source
            </a> ]</p>
            <div class="dyn-source"
                    id="with-exclusive-scope_source">
<pre>
        <span class="ruby-comment cmt"># File actionpack/lib/action_dispatch/routing/mapper.rb, line 1183</span>
1183:           <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">with_exclusive_scope</span>
1184:             <span class="ruby-keyword kw">begin</span>
1185:               <span class="ruby-identifier">old_name_prefix</span>, <span class="ruby-identifier">old_path</span> = <span class="ruby-ivar">@scope</span>[<span class="ruby-value">:as</span>], <span class="ruby-ivar">@scope</span>[<span class="ruby-value">:path</span>]
1186:               <span class="ruby-ivar">@scope</span>[<span class="ruby-value">:as</span>], <span class="ruby-ivar">@scope</span>[<span class="ruby-value">:path</span>] = <span class="ruby-keyword kw">nil</span>, <span class="ruby-keyword kw">nil</span>
1187: 
1188:               <span class="ruby-identifier">with_scope_level</span>(<span class="ruby-value">:exclusive</span>) <span class="ruby-keyword kw">do</span>
1189:                 <span class="ruby-keyword kw">yield</span>
1190:               <span class="ruby-keyword kw">end</span>
1191:             <span class="ruby-keyword kw">ensure</span>
1192:               <span class="ruby-ivar">@scope</span>[<span class="ruby-value">:as</span>], <span class="ruby-ivar">@scope</span>[<span class="ruby-value">:path</span>] = <span class="ruby-identifier">old_name_prefix</span>, <span class="ruby-identifier">old_path</span>
1193:             <span class="ruby-keyword kw">end</span>
1194:           <span class="ruby-keyword kw">end</span></pre>
            </div>
          </div>
        
      </div>

          
      <div class="method">
        <div class="title">
                      <a name="method-i-with_scope_level"></a>
            <b>with_scope_level</b>(kind, resource = parent_resource)          
        </div>

                  <div class="description">
                      </div>
        
        
                  <div class="sourcecode">
            <p class="source-link">[
            <a href="javascript:toggleSource('with-scope-level_source')"
                 id="l_method-i-with_scope_level_source">
              show source
            </a> ]</p>
            <div class="dyn-source"
                    id="with-scope-level_source">
<pre>
        <span class="ruby-comment cmt"># File actionpack/lib/action_dispatch/routing/mapper.rb, line 1196</span>
1196:           <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">with_scope_level</span>(<span class="ruby-identifier">kind</span>, <span class="ruby-identifier">resource</span> = <span class="ruby-identifier">parent_resource</span>)
1197:             <span class="ruby-identifier">old</span>, <span class="ruby-ivar">@scope</span>[<span class="ruby-value">:scope_level</span>] = <span class="ruby-ivar">@scope</span>[<span class="ruby-value">:scope_level</span>], <span class="ruby-identifier">kind</span>
1198:             <span class="ruby-identifier">old_resource</span>, <span class="ruby-ivar">@scope</span>[<span class="ruby-value">:scope_level_resource</span>] = <span class="ruby-ivar">@scope</span>[<span class="ruby-value">:scope_level_resource</span>], <span class="ruby-identifier">resource</span>
1199:             <span class="ruby-keyword kw">yield</span>
1200:           <span class="ruby-keyword kw">ensure</span>
1201:             <span class="ruby-ivar">@scope</span>[<span class="ruby-value">:scope_level</span>] = <span class="ruby-identifier">old</span>
1202:             <span class="ruby-ivar">@scope</span>[<span class="ruby-value">:scope_level_resource</span>] = <span class="ruby-identifier">old_resource</span>
1203:           <span class="ruby-keyword kw">end</span></pre>
            </div>
          </div>
        
      </div>

          </div>
  </div>
  </body>
</html>
