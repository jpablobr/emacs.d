<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html 
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
  <head>
    <title>Module: ActionView::Helpers::FormOptionsHelper</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="stylesheet" href="../../../rdoc-style.css" type="text/css" media="screen" />

    <script language="JavaScript" type="text/javascript">
    // <![CDATA[

        function toggleSource( id )
        {
          var elem
          var link

          if( document.getElementById )
          {
            elem = document.getElementById( id )
            link = document.getElementById( "l_" + id )
          }
          else if ( document.all )
          {
            elem = eval( "document.all." + id )
            link = eval( "document.all.l_" + id )
          }
          else
            return false;

          if( elem.style.display == "block" )
          {
            elem.style.display = "none"
            link.innerHTML = "show source"
          }
          else
          {
            elem.style.display = "block"
            link.innerHTML = "hide source"
          }
        }

        function openCode( url )
        {
          window.open( url, "SOURCE_CODE", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=480,width=750" ).focus();
        }
      // ]]>
    </script>
  </head>

  <body>
    <table width="100%" border='0' cellpadding='0' cellspacing='0' class='banner'>
    <tr><td>Ruby on Rails v3.0.3</td></tr>
    <tr>
  <td class="file-title"><span class="file-title-prefix">Module</span><br />ActionView::Helpers::FormOptionsHelper</td>
  <td align="right">
    <table cellspacing="0" cellpadding="2">
      <tr valign="top">
        <td>In:</td>
        <td>
<a href="../../../files/actionpack/lib/action_view/helpers/form_options_helper_rb.html">actionpack/lib/action_view/helpers/form_options_helper.rb</a>:
        </td>
      </tr>
         </table>
        </td>
        </tr>
      </table>
  <div id="bodyContent">
  <div id="content">

  <div class="description"><p>
Provides a number of methods for turning different kinds of containers into
a set of option tags.
</p>
<h2>Options</h2>
<p>
The <tt><a
href="FormOptionsHelper.html#method-i-collection_select">collection_select</a></tt>,
<tt>select</tt> and <tt><a
href="FormOptionsHelper.html#method-i-time_zone_select">time_zone_select</a></tt>
methods take an <tt>options</tt> parameter, a hash:
</p>
<ul>
<li><p>
<tt>:include_blank</tt> - set to true or a prompt string if the first
option element of the select element is a blank. Useful if there is not a
default value required for the select element.
</p>
</li>
</ul>
<p>
For example,
</p>
<pre>
  select(&quot;post&quot;, &quot;category&quot;, Post::CATEGORIES, {:include_blank =&gt; true})
</pre>
<p>
could become:
</p>
<pre>
  &lt;select name=&quot;post[category]&quot;&gt;
    &lt;option&gt;&lt;/option&gt;
    &lt;option&gt;joke&lt;/option&gt;
    &lt;option&gt;poem&lt;/option&gt;
  &lt;/select&gt;
</pre>
<p>
Another common case is a select tag for an <tt>belongs_to</tt>-associated
object.
</p>
<p>
Example with @post.person_id => 2:
</p>
<pre>
  select(&quot;post&quot;, &quot;person_id&quot;, Person.all.collect {|p| [ p.name, p.id ] }, {:include_blank =&gt; 'None'})
</pre>
<p>
could become:
</p>
<pre>
  &lt;select name=&quot;post[person_id]&quot;&gt;
    &lt;option value=&quot;&quot;&gt;None&lt;/option&gt;
    &lt;option value=&quot;1&quot;&gt;David&lt;/option&gt;
    &lt;option value=&quot;2&quot; selected=&quot;selected&quot;&gt;Sam&lt;/option&gt;
    &lt;option value=&quot;3&quot;&gt;Tobias&lt;/option&gt;
  &lt;/select&gt;
</pre>
<ul>
<li><p>
<tt>:prompt</tt> - set to true or a prompt string. When the select element
doesn&#8217;t have a value yet, this prepends an option with a generic
prompt &#8212; &#8220;Please select&#8221; &#8212; or the given prompt
string.
</p>
</li>
</ul>
<p>
Example:
</p>
<pre>
  select(&quot;post&quot;, &quot;person_id&quot;, Person.all.collect {|p| [ p.name, p.id ] }, {:prompt =&gt; 'Select Person'})
</pre>
<p>
could become:
</p>
<pre>
  &lt;select name=&quot;post[person_id]&quot;&gt;
    &lt;option value=&quot;&quot;&gt;Select Person&lt;/option&gt;
    &lt;option value=&quot;1&quot;&gt;David&lt;/option&gt;
    &lt;option value=&quot;2&quot;&gt;Sam&lt;/option&gt;
    &lt;option value=&quot;3&quot;&gt;Tobias&lt;/option&gt;
  &lt;/select&gt;
</pre>
<p>
Like the other form helpers, <tt>select</tt> can accept an <tt>:index</tt>
option to manually set the ID used in the resulting output. Unlike other
helpers, <tt>select</tt> expects this option to be in the
<tt>html_options</tt> parameter.
</p>
<p>
Example:
</p>
<pre>
  select(&quot;album[]&quot;, &quot;genre&quot;, %w[rap rock country], {}, { :index =&gt; nil })
</pre>
<p>
becomes:
</p>
<pre>
  &lt;select name=&quot;album[][genre]&quot; id=&quot;album__genre&quot;&gt;
    &lt;option value=&quot;rap&quot;&gt;rap&lt;/option&gt;
    &lt;option value=&quot;rock&quot;&gt;rock&lt;/option&gt;
    &lt;option value=&quot;country&quot;&gt;country&lt;/option&gt;
  &lt;/select&gt;
</pre>
<ul>
<li><p>
<tt>:disabled</tt> - can be a single value or an array of values that will
be disabled options in the final output.
</p>
</li>
</ul>
<p>
Example:
</p>
<pre>
  select(&quot;post&quot;, &quot;category&quot;, Post::CATEGORIES, {:disabled =&gt; 'restricted'})
</pre>
<p>
could become:
</p>
<pre>
  &lt;select name=&quot;post[category]&quot;&gt;
    &lt;option&gt;&lt;/option&gt;
    &lt;option&gt;joke&lt;/option&gt;
    &lt;option&gt;poem&lt;/option&gt;
    &lt;option disabled=&quot;disabled&quot;&gt;restricted&lt;/option&gt;
  &lt;/select&gt;
</pre>
<p>
When used with the <tt><a
href="FormOptionsHelper.html#method-i-collection_select">collection_select</a></tt>
helper, <tt>:disabled</tt> can also be a Proc that identifies those options
that should be disabled.
</p>
<p>
Example:
</p>
<pre>
  collection_select(:post, :category_id, Category.all, :id, :name, {:disabled =&gt; lambda{|category| category.archived? }})
</pre>
<p>
If the categories &#8220;2008 stuff&#8221; and &#8220;Christmas&#8221;
return true when the method <tt>archived?</tt> is called, this would
return:
</p>
<pre>
  &lt;select name=&quot;post[category_id]&quot;&gt;
    &lt;option value=&quot;1&quot; disabled=&quot;disabled&quot;&gt;2008 stuff&lt;/option&gt;
    &lt;option value=&quot;2&quot; disabled=&quot;disabled&quot;&gt;Christmas&lt;/option&gt;
    &lt;option value=&quot;3&quot;&gt;Jokes&lt;/option&gt;
    &lt;option value=&quot;4&quot;&gt;Poems&lt;/option&gt;
  &lt;/select&gt;</pre>
</div>


  <div class="sectiontitle">Methods</div>
  <ul>
                <li><a href="#method-i-collection_select">collection_select</a></li>
                <li><a href="#method-i-extract_selected_and_disabled">extract_selected_and_disabled</a></li>
                <li><a href="#method-i-extract_values_from_collection">extract_values_from_collection</a></li>
                <li><a href="#method-i-grouped_collection_select">grouped_collection_select</a></li>
                <li><a href="#method-i-grouped_options_for_select">grouped_options_for_select</a></li>
                <li><a href="#method-i-option_groups_from_collection_for_select">option_groups_from_collection_for_select</a></li>
                <li><a href="#method-i-option_html_attributes">option_html_attributes</a></li>
                <li><a href="#method-i-option_text_and_value">option_text_and_value</a></li>
                <li><a href="#method-i-option_value_selected%3F">option_value_selected?</a></li>
                <li><a href="#method-i-options_for_select">options_for_select</a></li>
                <li><a href="#method-i-options_from_collection_for_select">options_from_collection_for_select</a></li>
                <li><a href="#method-i-select">select</a></li>
                <li><a href="#method-i-time_zone_options_for_select">time_zone_options_for_select</a></li>
                <li><a href="#method-i-time_zone_select">time_zone_select</a></li>
      </ul>

<div class="sectiontitle">Included Modules</div>
<ul>
  <li>
          <a href="../../ERB/Util.html">ERB::Util</a>      </li>
  <li>
          TextHelper      </li>
</ul>



                        
    <div class="sectiontitle">
      Public      Instance      methods
    </div>

          
      <div class="method">
        <div class="title">
                      <a name="method-i-collection_select"></a>
            <b>collection_select</b>(object, method, collection, value_method, text_method, options = {}, html_options = {})          
        </div>

                  <div class="description">
            <p>
Returns <tt>&lt;select&gt;</tt> and <tt>&lt;option&gt;</tt> tags for the
collection of existing return values of <tt>method</tt> for
<tt>object</tt>&#8217;s class. The value returned from calling
<tt>method</tt> on the instance <tt>object</tt> will be selected. If
calling <tt>method</tt> returns <tt>nil</tt>, no selection is made without
including <tt>:prompt</tt> or <tt>:include_blank</tt> in the
<tt>options</tt> hash.
</p>
<p>
The <tt>:value_method</tt> and <tt>:text_method</tt> parameters are methods
to be called on each member of <tt>collection</tt>. The return values are
used as the <tt>value</tt> attribute and contents of each
<tt>&lt;option&gt;</tt> tag, respectively.
</p>
<p>
Example object structure for use with this method:
</p>
<pre>
  class Post &lt; ActiveRecord::Base
    belongs_to :author
  end
  class Author &lt; ActiveRecord::Base
    has_many :posts
    def name_with_initial
      &quot;#{first_name.first}. #{last_name}&quot;
    end
  end
</pre>
<p>
Sample usage (selecting the associated Author for an instance of Post,
<tt>@post</tt>):
</p>
<pre>
  collection_select(:post, :author_id, Author.all, :id, :name_with_initial, :prompt =&gt; true)
</pre>
<p>
If <tt>@post.author_id</tt> is already <tt>1</tt>, this would return:
</p>
<pre>
  &lt;select name=&quot;post[author_id]&quot;&gt;
    &lt;option value=&quot;&quot;&gt;Please select&lt;/option&gt;
    &lt;option value=&quot;1&quot; selected=&quot;selected&quot;&gt;D. Heinemeier Hansson&lt;/option&gt;
    &lt;option value=&quot;2&quot;&gt;D. Thomas&lt;/option&gt;
    &lt;option value=&quot;3&quot;&gt;M. Clark&lt;/option&gt;
  &lt;/select&gt;</pre>          </div>
        
        
                  <div class="sourcecode">
            <p class="source-link">[
            <a href="javascript:toggleSource('collection-select_source')"
                 id="l_method-i-collection_select_source">
              show source
            </a> ]</p>
            <div class="dyn-source"
                    id="collection-select_source">
<pre>
       <span class="ruby-comment cmt"># File actionpack/lib/action_view/helpers/form_options_helper.rb, line 165</span>
165:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">collection_select</span>(<span class="ruby-identifier">object</span>, <span class="ruby-identifier">method</span>, <span class="ruby-identifier">collection</span>, <span class="ruby-identifier">value_method</span>, <span class="ruby-identifier">text_method</span>, <span class="ruby-identifier">options</span> = {}, <span class="ruby-identifier">html_options</span> = {})
166:         <span class="ruby-constant">InstanceTag</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">object</span>, <span class="ruby-identifier">method</span>, <span class="ruby-keyword kw">self</span>, <span class="ruby-identifier">options</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-value">:object</span>)).<span class="ruby-identifier">to_collection_select_tag</span>(<span class="ruby-identifier">collection</span>, <span class="ruby-identifier">value_method</span>, <span class="ruby-identifier">text_method</span>, <span class="ruby-identifier">options</span>, <span class="ruby-identifier">html_options</span>)
167:       <span class="ruby-keyword kw">end</span></pre>
            </div>
          </div>
        
      </div>

          
      <div class="method">
        <div class="title">
                      <a name="method-i-grouped_collection_select"></a>
            <b>grouped_collection_select</b>(object, method, collection, group_method, group_label_method, option_key_method, option_value_method, options = {}, html_options = {})          
        </div>

                  <div class="description">
            <p>
Returns <tt>&lt;select&gt;</tt>, <tt>&lt;optgroup&gt;</tt> and
<tt>&lt;option&gt;</tt> tags for the collection of existing return values
of <tt>method</tt> for <tt>object</tt>&#8217;s class. The value returned
from calling <tt>method</tt> on the instance <tt>object</tt> will be
selected. If calling <tt>method</tt> returns <tt>nil</tt>, no selection is
made without including <tt>:prompt</tt> or <tt>:include_blank</tt> in the
<tt>options</tt> hash.
</p>
<p>
Parameters:
</p>
<ul>
<li><p>
<tt>object</tt> - The instance of the class to be used for the select tag
</p>
</li>
<li><p>
<tt>method</tt> - The attribute of <tt>object</tt> corresponding to the
select tag
</p>
</li>
<li><p>
<tt>collection</tt> - An array of objects representing the
<tt>&lt;optgroup&gt;</tt> tags.
</p>
</li>
<li><p>
<tt>group_method</tt> - The name of a method which, when called on a member
of <tt>collection</tt>, returns an array of child objects representing the
<tt>&lt;option&gt;</tt> tags.
</p>
</li>
<li><p>
<tt>group_label_method</tt> - The name of a method which, when called on a
member of <tt>collection</tt>, returns a string to be used as the
<tt>label</tt> attribute for its <tt>&lt;optgroup&gt;</tt> tag.
</p>
</li>
<li><p>
<tt>option_key_method</tt> - The name of a method which, when called on a
child object of a member of <tt>collection</tt>, returns a value to be used
as the <tt>value</tt> attribute for its <tt>&lt;option&gt;</tt> tag.
</p>
</li>
<li><p>
<tt>option_value_method</tt> - The name of a method which, when called on a
child object of a member of <tt>collection</tt>, returns a value to be used
as the contents of its <tt>&lt;option&gt;</tt> tag.
</p>
</li>
</ul>
<p>
Example object structure for use with this method:
</p>
<pre>
  class Continent &lt; ActiveRecord::Base
    has_many :countries
    # attribs: id, name
  end
  class Country &lt; ActiveRecord::Base
    belongs_to :continent
    # attribs: id, name, continent_id
  end
  class City &lt; ActiveRecord::Base
    belongs_to :country
    # attribs: id, name, country_id
  end
</pre>
<p>
Sample usage:
</p>
<pre>
  grouped_collection_select(:city, :country_id, @continents, :countries, :name, :id, :name)
</pre>
<p>
Possible output:
</p>
<pre>
  &lt;select name=&quot;city[country_id]&quot;&gt;
    &lt;optgroup label=&quot;Africa&quot;&gt;
      &lt;option value=&quot;1&quot;&gt;South Africa&lt;/option&gt;
      &lt;option value=&quot;3&quot;&gt;Somalia&lt;/option&gt;
    &lt;/optgroup&gt;
    &lt;optgroup label=&quot;Europe&quot;&gt;
      &lt;option value=&quot;7&quot; selected=&quot;selected&quot;&gt;Denmark&lt;/option&gt;
      &lt;option value=&quot;2&quot;&gt;Ireland&lt;/option&gt;
    &lt;/optgroup&gt;
  &lt;/select&gt;</pre>          </div>
        
        
                  <div class="sourcecode">
            <p class="source-link">[
            <a href="javascript:toggleSource('grouped-collection-select_source')"
                 id="l_method-i-grouped_collection_select_source">
              show source
            </a> ]</p>
            <div class="dyn-source"
                    id="grouped-collection-select_source">
<pre>
       <span class="ruby-comment cmt"># File actionpack/lib/action_view/helpers/form_options_helper.rb, line 217</span>
217:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">grouped_collection_select</span>(<span class="ruby-identifier">object</span>, <span class="ruby-identifier">method</span>, <span class="ruby-identifier">collection</span>, <span class="ruby-identifier">group_method</span>, <span class="ruby-identifier">group_label_method</span>, <span class="ruby-identifier">option_key_method</span>, <span class="ruby-identifier">option_value_method</span>, <span class="ruby-identifier">options</span> = {}, <span class="ruby-identifier">html_options</span> = {})
218:         <span class="ruby-constant">InstanceTag</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">object</span>, <span class="ruby-identifier">method</span>, <span class="ruby-keyword kw">self</span>, <span class="ruby-identifier">options</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-value">:object</span>)).<span class="ruby-identifier">to_grouped_collection_select_tag</span>(<span class="ruby-identifier">collection</span>, <span class="ruby-identifier">group_method</span>, <span class="ruby-identifier">group_label_method</span>, <span class="ruby-identifier">option_key_method</span>, <span class="ruby-identifier">option_value_method</span>, <span class="ruby-identifier">options</span>, <span class="ruby-identifier">html_options</span>)
219:       <span class="ruby-keyword kw">end</span></pre>
            </div>
          </div>
        
      </div>

          
      <div class="method">
        <div class="title">
                      <a name="method-i-grouped_options_for_select"></a>
            <b>grouped_options_for_select</b>(grouped_options, selected_key = nil, prompt = nil)          
        </div>

                  <div class="description">
            <p>
Returns a string of <tt>&lt;option&gt;</tt> tags, like <tt><a
href="FormOptionsHelper.html#method-i-options_for_select">options_for_select</a></tt>,
but wraps them with <tt>&lt;optgroup&gt;</tt> tags.
</p>
<p>
Parameters:
</p>
<ul>
<li><p>
<tt>grouped_options</tt> - Accepts a nested array or hash of strings.  The
first value serves as the <tt>&lt;optgroup&gt;</tt> label while the second
value must be an array of options. The second value can be a nested array
of text-value pairs. See <tt><a
href="FormOptionsHelper.html#method-i-options_for_select">options_for_select</a></tt>
for more info.
</p>
<pre>
 Ex. [&quot;North America&quot;,[[&quot;United States&quot;,&quot;US&quot;],[&quot;Canada&quot;,&quot;CA&quot;]]]
</pre>
</li>
<li><p>
<tt>selected_key</tt> - A value equal to the <tt>value</tt> attribute for
one of the <tt>&lt;option&gt;</tt> tags, which will have the
<tt>selected</tt> attribute set. Note: It is possible for this value to
match multiple options as you might have the same option in multiple
groups.  Each will then get <tt>selected=&quot;selected&quot;</tt>.
</p>
</li>
<li><p>
<tt>prompt</tt> - set to true or a prompt string. When the select element
doesn&#8217;t have a value yet, this prepends an option with a generic
prompt - &#8220;Please select&#8221; - or the given prompt string.
</p>
</li>
</ul>
<p>
Sample usage (Array):
</p>
<pre>
  grouped_options = [
   ['North America',
     [['United States','US'],'Canada']],
   ['Europe',
     ['Denmark','Germany','France']]
  ]
  grouped_options_for_select(grouped_options)
</pre>
<p>
Sample usage (Hash):
</p>
<pre>
  grouped_options = {
   'North America' =&gt; [['United States','US], 'Canada'],
   'Europe' =&gt; ['Denmark','Germany','France']
  }
  grouped_options_for_select(grouped_options)
</pre>
<p>
Possible output:
</p>
<pre>
  &lt;optgroup label=&quot;Europe&quot;&gt;
    &lt;option value=&quot;Denmark&quot;&gt;Denmark&lt;/option&gt;
    &lt;option value=&quot;Germany&quot;&gt;Germany&lt;/option&gt;
    &lt;option value=&quot;France&quot;&gt;France&lt;/option&gt;
  &lt;/optgroup&gt;
  &lt;optgroup label=&quot;North America&quot;&gt;
    &lt;option value=&quot;US&quot;&gt;United States&lt;/option&gt;
    &lt;option value=&quot;Canada&quot;&gt;Canada&lt;/option&gt;
  &lt;/optgroup&gt;
</pre>
<p>
<b>Note:</b> Only the <tt>&lt;optgroup&gt;</tt> and <tt>&lt;option&gt;</tt>
tags are returned, so you still have to wrap the output in an appropriate
<tt>&lt;select&gt;</tt> tag.
</p>          </div>
        
        
                  <div class="sourcecode">
            <p class="source-link">[
            <a href="javascript:toggleSource('grouped-options-for-select_source')"
                 id="l_method-i-grouped_options_for_select_source">
              show source
            </a> ]</p>
            <div class="dyn-source"
                    id="grouped-options-for-select_source">
<pre>
       <span class="ruby-comment cmt"># File actionpack/lib/action_view/helpers/form_options_helper.rb, line 449</span>
449:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">grouped_options_for_select</span>(<span class="ruby-identifier">grouped_options</span>, <span class="ruby-identifier">selected_key</span> = <span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">prompt</span> = <span class="ruby-keyword kw">nil</span>)
450:         <span class="ruby-identifier">body</span> = <span class="ruby-value str">''</span>
451:         <span class="ruby-identifier">body</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">content_tag</span>(<span class="ruby-value">:option</span>, <span class="ruby-identifier">prompt</span>, { <span class="ruby-value">:value</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;&quot;</span> }, <span class="ruby-keyword kw">true</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">prompt</span>
452: 
453:         <span class="ruby-identifier">grouped_options</span> = <span class="ruby-identifier">grouped_options</span>.<span class="ruby-identifier">sort</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">grouped_options</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Hash</span>)
454: 
455:         <span class="ruby-identifier">grouped_options</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">group</span><span class="ruby-operator">|</span>
456:           <span class="ruby-identifier">body</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">content_tag</span>(<span class="ruby-value">:optgroup</span>, <span class="ruby-identifier">options_for_select</span>(<span class="ruby-identifier">group</span>[<span class="ruby-value">1</span>], <span class="ruby-identifier">selected_key</span>), <span class="ruby-value">:label</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">group</span>[<span class="ruby-value">0</span>])
457:         <span class="ruby-keyword kw">end</span>
458: 
459:         <span class="ruby-identifier">body</span>.<span class="ruby-identifier">html_safe</span>
460:       <span class="ruby-keyword kw">end</span></pre>
            </div>
          </div>
        
      </div>

          
      <div class="method">
        <div class="title">
                      <a name="method-i-option_groups_from_collection_for_select"></a>
            <b>option_groups_from_collection_for_select</b>(collection, group_method, group_label_method, option_key_method, option_value_method, selected_key = nil)          
        </div>

                  <div class="description">
            <p>
Returns a string of <tt>&lt;option&gt;</tt> tags, like <tt><a
href="FormOptionsHelper.html#method-i-options_from_collection_for_select">options_from_collection_for_select</a></tt>,
but groups them by <tt>&lt;optgroup&gt;</tt> tags based on the object
relationships of the arguments.
</p>
<p>
Parameters:
</p>
<ul>
<li><p>
<tt>collection</tt> - An array of objects representing the
<tt>&lt;optgroup&gt;</tt> tags.
</p>
</li>
<li><p>
<tt>group_method</tt> - The name of a method which, when called on a member
of <tt>collection</tt>, returns an array of child objects representing the
<tt>&lt;option&gt;</tt> tags.
</p>
</li>
<li><p>
group_label_method+ - The name of a method which, when called on a member
of <tt>collection</tt>, returns a string to be used as the <tt>label</tt>
attribute for its <tt>&lt;optgroup&gt;</tt> tag.
</p>
</li>
<li><p>
<tt>option_key_method</tt> - The name of a method which, when called on a
child object of a member of <tt>collection</tt>, returns a value to be used
as the <tt>value</tt> attribute for its <tt>&lt;option&gt;</tt> tag.
</p>
</li>
<li><p>
<tt>option_value_method</tt> - The name of a method which, when called on a
child object of a member of <tt>collection</tt>, returns a value to be used
as the contents of its <tt>&lt;option&gt;</tt> tag.
</p>
</li>
<li><p>
<tt>selected_key</tt> - A value equal to the <tt>value</tt> attribute for
one of the <tt>&lt;option&gt;</tt> tags, which will have the
<tt>selected</tt> attribute set. Corresponds to the return value of one of
the calls to <tt>option_key_method</tt>. If <tt>nil</tt>, no selection is
made. Can also be a hash if disabled values are to be specified.
</p>
</li>
</ul>
<p>
Example object structure for use with this method:
</p>
<pre>
  class Continent &lt; ActiveRecord::Base
    has_many :countries
    # attribs: id, name
  end
  class Country &lt; ActiveRecord::Base
    belongs_to :continent
    # attribs: id, name, continent_id
  end
</pre>
<p>
Sample usage:
</p>
<pre>
  option_groups_from_collection_for_select(@continents, :countries, :name, :id, :name, 3)
</pre>
<p>
Possible output:
</p>
<pre>
  &lt;optgroup label=&quot;Africa&quot;&gt;
    &lt;option value=&quot;1&quot;&gt;Egypt&lt;/option&gt;
    &lt;option value=&quot;4&quot;&gt;Rwanda&lt;/option&gt;
    ...
  &lt;/optgroup&gt;
  &lt;optgroup label=&quot;Asia&quot;&gt;
    &lt;option value=&quot;3&quot; selected=&quot;selected&quot;&gt;China&lt;/option&gt;
    &lt;option value=&quot;12&quot;&gt;India&lt;/option&gt;
    &lt;option value=&quot;5&quot;&gt;Japan&lt;/option&gt;
    ...
  &lt;/optgroup&gt;
</pre>
<p>
<b>Note:</b> Only the <tt>&lt;optgroup&gt;</tt> and <tt>&lt;option&gt;</tt>
tags are returned, so you still have to wrap the output in an appropriate
<tt>&lt;select&gt;</tt> tag.
</p>          </div>
        
        
                  <div class="sourcecode">
            <p class="source-link">[
            <a href="javascript:toggleSource('option-groups-from-collection-for-select_source')"
                 id="l_method-i-option_groups_from_collection_for_select_source">
              show source
            </a> ]</p>
            <div class="dyn-source"
                    id="option-groups-from-collection-for-select_source">
<pre>
       <span class="ruby-comment cmt"># File actionpack/lib/action_view/helpers/form_options_helper.rb, line 397</span>
397:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">option_groups_from_collection_for_select</span>(<span class="ruby-identifier">collection</span>, <span class="ruby-identifier">group_method</span>, <span class="ruby-identifier">group_label_method</span>, <span class="ruby-identifier">option_key_method</span>, <span class="ruby-identifier">option_value_method</span>, <span class="ruby-identifier">selected_key</span> = <span class="ruby-keyword kw">nil</span>)
398:         <span class="ruby-identifier">collection</span>.<span class="ruby-identifier">map</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">group</span><span class="ruby-operator">|</span>
399:           <span class="ruby-identifier">group_label_string</span> = <span class="ruby-identifier">eval</span>(<span class="ruby-node">&quot;group.#{group_label_method}&quot;</span>)
400:           <span class="ruby-node">&quot;&lt;optgroup label=\&quot;#{html_escape(group_label_string)}\&quot;&gt;&quot;</span> <span class="ruby-operator">+</span>
401:             <span class="ruby-identifier">options_from_collection_for_select</span>(<span class="ruby-identifier">eval</span>(<span class="ruby-node">&quot;group.#{group_method}&quot;</span>), <span class="ruby-identifier">option_key_method</span>, <span class="ruby-identifier">option_value_method</span>, <span class="ruby-identifier">selected_key</span>) <span class="ruby-operator">+</span>
402:             <span class="ruby-value str">'&lt;/optgroup&gt;'</span>
403:         <span class="ruby-keyword kw">end</span>.<span class="ruby-identifier">join</span>.<span class="ruby-identifier">html_safe</span>
404:       <span class="ruby-keyword kw">end</span></pre>
            </div>
          </div>
        
      </div>

          
      <div class="method">
        <div class="title">
                      <a name="method-i-options_for_select"></a>
            <b>options_for_select</b>(container, selected = nil)          
        </div>

                  <div class="description">
            <p>
Accepts a container (hash, array, enumerable, your type) and returns a
string of option tags. Given a container where the elements respond to
first and last (such as a two-element array), the &#8220;lasts&#8221; serve
as option values and the &#8220;firsts&#8221; as option text. Hashes are
turned into this form automatically, so the keys become
&#8220;firsts&#8221; and values become lasts. If <tt>selected</tt> is
specified, the matching &#8220;last&#8221; or element will get the selected
option-tag.  <tt>selected</tt> may also be an array of values to be
selected when using a multiple select.
</p>
<p>
Examples (call, result):
</p>
<pre>
  options_for_select([[&quot;Dollar&quot;, &quot;$&quot;], [&quot;Kroner&quot;, &quot;DKK&quot;]])
    &lt;option value=&quot;$&quot;&gt;Dollar&lt;/option&gt;\n&lt;option value=&quot;DKK&quot;&gt;Kroner&lt;/option&gt;

  options_for_select([ &quot;VISA&quot;, &quot;MasterCard&quot; ], &quot;MasterCard&quot;)
    &lt;option&gt;VISA&lt;/option&gt;\n&lt;option selected=&quot;selected&quot;&gt;MasterCard&lt;/option&gt;

  options_for_select({ &quot;Basic&quot; =&gt; &quot;$20&quot;, &quot;Plus&quot; =&gt; &quot;$40&quot; }, &quot;$40&quot;)
    &lt;option value=&quot;$20&quot;&gt;Basic&lt;/option&gt;\n&lt;option value=&quot;$40&quot; selected=&quot;selected&quot;&gt;Plus&lt;/option&gt;

  options_for_select([ &quot;VISA&quot;, &quot;MasterCard&quot;, &quot;Discover&quot; ], [&quot;VISA&quot;, &quot;Discover&quot;])
    &lt;option selected=&quot;selected&quot;&gt;VISA&lt;/option&gt;\n&lt;option&gt;MasterCard&lt;/option&gt;\n&lt;option selected=&quot;selected&quot;&gt;Discover&lt;/option&gt;
</pre>
<p>
You can optionally provide html attributes as the last element of the
array.
</p>
<p>
Examples:
</p>
<pre>
  options_for_select([ &quot;Denmark&quot;, [&quot;USA&quot;, {:class=&gt;'bold'}], &quot;Sweden&quot; ], [&quot;USA&quot;, &quot;Sweden&quot;])
    &lt;option value=&quot;Denmark&quot;&gt;Denmark&lt;/option&gt;\n&lt;option value=&quot;USA&quot; class=&quot;bold&quot; selected=&quot;selected&quot;&gt;USA&lt;/option&gt;\n&lt;option value=&quot;Sweden&quot; selected=&quot;selected&quot;&gt;Sweden&lt;/option&gt;

  options_for_select([[&quot;Dollar&quot;, &quot;$&quot;, {:class=&gt;&quot;bold&quot;}], [&quot;Kroner&quot;, &quot;DKK&quot;, {:onclick =&gt; &quot;alert('HI');&quot;}]])
    &lt;option value=&quot;$&quot; class=&quot;bold&quot;&gt;Dollar&lt;/option&gt;\n&lt;option value=&quot;DKK&quot; onclick=&quot;alert('HI');&quot;&gt;Kroner&lt;/option&gt;
</pre>
<p>
If you wish to specify disabled option tags, set <tt>selected</tt> to be a
hash, with <tt>:disabled</tt> being either a value or array of values to be
disabled. In this case, you can use <tt>:selected</tt> to specify selected
option tags.
</p>
<p>
Examples:
</p>
<pre>
  options_for_select([&quot;Free&quot;, &quot;Basic&quot;, &quot;Advanced&quot;, &quot;Super Platinum&quot;], :disabled =&gt; &quot;Super Platinum&quot;)
    &lt;option value=&quot;Free&quot;&gt;Free&lt;/option&gt;\n&lt;option value=&quot;Basic&quot;&gt;Basic&lt;/option&gt;\n&lt;option value=&quot;Advanced&quot;&gt;Advanced&lt;/option&gt;\n&lt;option value=&quot;Super Platinum&quot; disabled=&quot;disabled&quot;&gt;Super Platinum&lt;/option&gt;

  options_for_select([&quot;Free&quot;, &quot;Basic&quot;, &quot;Advanced&quot;, &quot;Super Platinum&quot;], :disabled =&gt; [&quot;Advanced&quot;, &quot;Super Platinum&quot;])
    &lt;option value=&quot;Free&quot;&gt;Free&lt;/option&gt;\n&lt;option value=&quot;Basic&quot;&gt;Basic&lt;/option&gt;\n&lt;option value=&quot;Advanced&quot; disabled=&quot;disabled&quot;&gt;Advanced&lt;/option&gt;\n&lt;option value=&quot;Super Platinum&quot; disabled=&quot;disabled&quot;&gt;Super Platinum&lt;/option&gt;

  options_for_select([&quot;Free&quot;, &quot;Basic&quot;, &quot;Advanced&quot;, &quot;Super Platinum&quot;], :selected =&gt; &quot;Free&quot;, :disabled =&gt; &quot;Super Platinum&quot;)
    &lt;option value=&quot;Free&quot; selected=&quot;selected&quot;&gt;Free&lt;/option&gt;\n&lt;option value=&quot;Basic&quot;&gt;Basic&lt;/option&gt;\n&lt;option value=&quot;Advanced&quot;&gt;Advanced&lt;/option&gt;\n&lt;option value=&quot;Super Platinum&quot; disabled=&quot;disabled&quot;&gt;Super Platinum&lt;/option&gt;
</pre>
<p>
NOTE: Only the option tags are returned, you have to wrap this call in a
regular HTML select tag.
</p>          </div>
        
        
                  <div class="sourcecode">
            <p class="source-link">[
            <a href="javascript:toggleSource('options-for-select_source')"
                 id="l_method-i-options_for_select_source">
              show source
            </a> ]</p>
            <div class="dyn-source"
                    id="options-for-select_source">
<pre>
       <span class="ruby-comment cmt"># File actionpack/lib/action_view/helpers/form_options_helper.rb, line 297</span>
297:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">options_for_select</span>(<span class="ruby-identifier">container</span>, <span class="ruby-identifier">selected</span> = <span class="ruby-keyword kw">nil</span>)
298:         <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">container</span> <span class="ruby-keyword kw">if</span> <span class="ruby-constant">String</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">container</span>
299: 
300:         <span class="ruby-identifier">container</span> = <span class="ruby-identifier">container</span>.<span class="ruby-identifier">to_a</span> <span class="ruby-keyword kw">if</span> <span class="ruby-constant">Hash</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">container</span>
301:         <span class="ruby-identifier">selected</span>, <span class="ruby-identifier">disabled</span> = <span class="ruby-identifier">extract_selected_and_disabled</span>(<span class="ruby-identifier">selected</span>).<span class="ruby-identifier">map</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span> <span class="ruby-identifier">r</span> <span class="ruby-operator">|</span>
302:            <span class="ruby-constant">Array</span>.<span class="ruby-identifier">wrap</span>(<span class="ruby-identifier">r</span>).<span class="ruby-identifier">map</span>(&amp;<span class="ruby-value">:to_s</span>)
303:         <span class="ruby-keyword kw">end</span>
304: 
305:         <span class="ruby-identifier">container</span>.<span class="ruby-identifier">map</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">element</span><span class="ruby-operator">|</span>
306:           <span class="ruby-identifier">html_attributes</span> = <span class="ruby-identifier">option_html_attributes</span>(<span class="ruby-identifier">element</span>)
307:           <span class="ruby-identifier">text</span>, <span class="ruby-identifier">value</span> = <span class="ruby-identifier">option_text_and_value</span>(<span class="ruby-identifier">element</span>).<span class="ruby-identifier">map</span>(&amp;<span class="ruby-value">:to_s</span>)
308:           <span class="ruby-identifier">selected_attribute</span> = <span class="ruby-value str">' selected=&quot;selected&quot;'</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">option_value_selected?</span>(<span class="ruby-identifier">value</span>, <span class="ruby-identifier">selected</span>)
309:           <span class="ruby-identifier">disabled_attribute</span> = <span class="ruby-value str">' disabled=&quot;disabled&quot;'</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">disabled</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">option_value_selected?</span>(<span class="ruby-identifier">value</span>, <span class="ruby-identifier">disabled</span>)
310:           <span class="ruby-node">%(&lt;option value=&quot;#{html_escape(value)}&quot;#{selected_attribute}#{disabled_attribute}#{html_attributes}&gt;#{html_escape(text)}&lt;/option&gt;)</span>
311:         <span class="ruby-keyword kw">end</span>.<span class="ruby-identifier">join</span>(<span class="ruby-value str">&quot;\n&quot;</span>).<span class="ruby-identifier">html_safe</span>
312: 
313:       <span class="ruby-keyword kw">end</span></pre>
            </div>
          </div>
        
      </div>

          
      <div class="method">
        <div class="title">
                      <a name="method-i-options_from_collection_for_select"></a>
            <b>options_from_collection_for_select</b>(collection, value_method, text_method, selected = nil)          
        </div>

                  <div class="description">
            <p>
Returns a string of option tags that have been compiled by iterating over
the <tt>collection</tt> and assigning the the result of a call to the
<tt>value_method</tt> as the option value and the <tt>text_method</tt> as
the option text. Example:
</p>
<pre>
  options_from_collection_for_select(@people, 'id', 'name')
</pre>
<p>
This will output the same HTML as if you did this:
</p>
<pre>
  &lt;option value=&quot;#{person.id}&quot;&gt;#{person.name}&lt;/option&gt;
</pre>
<p>
This is more often than not used inside a select_tag like this example:
</p>
<pre>
  select_tag 'person', options_from_collection_for_select(@people, 'id', 'name')
</pre>
<p>
If <tt>selected</tt> is specified as a value or array of values, the
element(s) returning a match on <tt>value_method</tt> will be selected
option tag(s).
</p>
<p>
If <tt>selected</tt> is specified as a Proc, those members of the
collection that return true for the anonymous function are the selected
values.
</p>
<p>
<tt>selected</tt> can also be a hash, specifying both <tt>:selected</tt>
and/or <tt>:disabled</tt> values as required.
</p>
<p>
Be sure to specify the same class as the <tt>value_method</tt> when
specifying selected or disabled options. Failure to do this will produce
undesired results. Example:
</p>
<pre>
  options_from_collection_for_select(@people, 'id', 'name', '1')
</pre>
<p>
Will not select a person with the id of 1 because 1 (an <a
href="../../Integer.html">Integer</a>) is not the same as &#8216;1&#8217;
(a string)
</p>
<pre>
  options_from_collection_for_select(@people, 'id', 'name', 1)
</pre>
<p>
should produce the desired results.
</p>          </div>
        
        
                  <div class="sourcecode">
            <p class="source-link">[
            <a href="javascript:toggleSource('options-from-collection-for-select_source')"
                 id="l_method-i-options_from_collection_for_select_source">
              show source
            </a> ]</p>
            <div class="dyn-source"
                    id="options-from-collection-for-select_source">
<pre>
       <span class="ruby-comment cmt"># File actionpack/lib/action_view/helpers/form_options_helper.rb, line 339</span>
339:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">options_from_collection_for_select</span>(<span class="ruby-identifier">collection</span>, <span class="ruby-identifier">value_method</span>, <span class="ruby-identifier">text_method</span>, <span class="ruby-identifier">selected</span> = <span class="ruby-keyword kw">nil</span>)
340:         <span class="ruby-identifier">options</span> = <span class="ruby-identifier">collection</span>.<span class="ruby-identifier">map</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">element</span><span class="ruby-operator">|</span>
341:           [<span class="ruby-identifier">element</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">text_method</span>), <span class="ruby-identifier">element</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">value_method</span>)]
342:         <span class="ruby-keyword kw">end</span>
343:         <span class="ruby-identifier">selected</span>, <span class="ruby-identifier">disabled</span> = <span class="ruby-identifier">extract_selected_and_disabled</span>(<span class="ruby-identifier">selected</span>)
344:         <span class="ruby-identifier">select_deselect</span> = {}
345:         <span class="ruby-identifier">select_deselect</span>[<span class="ruby-value">:selected</span>] = <span class="ruby-identifier">extract_values_from_collection</span>(<span class="ruby-identifier">collection</span>, <span class="ruby-identifier">value_method</span>, <span class="ruby-identifier">selected</span>)
346:         <span class="ruby-identifier">select_deselect</span>[<span class="ruby-value">:disabled</span>] = <span class="ruby-identifier">extract_values_from_collection</span>(<span class="ruby-identifier">collection</span>, <span class="ruby-identifier">value_method</span>, <span class="ruby-identifier">disabled</span>)
347: 
348:         <span class="ruby-identifier">options_for_select</span>(<span class="ruby-identifier">options</span>, <span class="ruby-identifier">select_deselect</span>)
349:       <span class="ruby-keyword kw">end</span></pre>
            </div>
          </div>
        
      </div>

          
      <div class="method">
        <div class="title">
                      <a name="method-i-select"></a>
            <b>select</b>(object, method, choices, options = {}, html_options = {})          
        </div>

                  <div class="description">
            <p>
Create a select tag and a series of contained option tags for the provided
object and method. The option currently held by the object will be
selected, provided that the object is available. See <a
href="FormOptionsHelper.html#method-i-options_for_select">options_for_select</a>
for the required format of the choices parameter.
</p>
<p>
Example with @post.person_id => 1:
</p>
<pre>
  select(&quot;post&quot;, &quot;person_id&quot;, Person.all.collect {|p| [ p.name, p.id ] }, { :include_blank =&gt; true })
</pre>
<p>
could become:
</p>
<pre>
  &lt;select name=&quot;post[person_id]&quot;&gt;
    &lt;option value=&quot;&quot;&gt;&lt;/option&gt;
    &lt;option value=&quot;1&quot; selected=&quot;selected&quot;&gt;David&lt;/option&gt;
    &lt;option value=&quot;2&quot;&gt;Sam&lt;/option&gt;
    &lt;option value=&quot;3&quot;&gt;Tobias&lt;/option&gt;
  &lt;/select&gt;
</pre>
<p>
This can be used to provide a default set of options in the standard way:
before rendering the create form, a new model instance is assigned the
default options and bound to @model_name. Usually this model is not saved
to the database. Instead, a second model object is created when the create
request is received. This allows the user to submit a form page more than
once with the expected results of creating multiple records. In addition,
this allows a single partial to be used to generate form inputs for both
edit and create forms.
</p>
<p>
By default, <tt>post.person_id</tt> is the selected option.  Specify
<tt>:selected =&gt; value</tt> to use a different selection or
<tt>:selected =&gt; nil</tt> to leave all options unselected. Similarly,
you can specify values to be disabled in the option tags by specifying the
<tt>:disabled</tt> option. This can either be a single value or an array of
values to be disabled.
</p>          </div>
        
        
                  <div class="sourcecode">
            <p class="source-link">[
            <a href="javascript:toggleSource('select_source')"
                 id="l_method-i-select_source">
              show source
            </a> ]</p>
            <div class="dyn-source"
                    id="select_source">
<pre>
       <span class="ruby-comment cmt"># File actionpack/lib/action_view/helpers/form_options_helper.rb, line 131</span>
131:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">select</span>(<span class="ruby-identifier">object</span>, <span class="ruby-identifier">method</span>, <span class="ruby-identifier">choices</span>, <span class="ruby-identifier">options</span> = {}, <span class="ruby-identifier">html_options</span> = {})
132:         <span class="ruby-constant">InstanceTag</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">object</span>, <span class="ruby-identifier">method</span>, <span class="ruby-keyword kw">self</span>, <span class="ruby-identifier">options</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-value">:object</span>)).<span class="ruby-identifier">to_select_tag</span>(<span class="ruby-identifier">choices</span>, <span class="ruby-identifier">options</span>, <span class="ruby-identifier">html_options</span>)
133:       <span class="ruby-keyword kw">end</span></pre>
            </div>
          </div>
        
      </div>

          
      <div class="method">
        <div class="title">
                      <a name="method-i-time_zone_options_for_select"></a>
            <b>time_zone_options_for_select</b>(selected = nil, priority_zones = nil, model = ::ActiveSupport::TimeZone)          
        </div>

                  <div class="description">
            <p>
Returns a string of option tags for pretty much any time zone in the world.
Supply a <a
href="../../ActiveSupport/TimeZone.html">ActiveSupport::TimeZone</a> name
as <tt>selected</tt> to have it marked as the selected option tag. You can
also supply an array of <a
href="../../ActiveSupport/TimeZone.html">ActiveSupport::TimeZone</a>
objects as <tt>priority_zones</tt>, so that they will be listed above the
rest of the (long) list. (You can use ActiveSupport::TimeZone.us_zones as a
convenience for obtaining a list of the US time zones, or a Regexp to
select the zones of your choice)
</p>
<p>
The <tt>selected</tt> parameter must be either <tt>nil</tt>, or a string
that names a <a
href="../../ActiveSupport/TimeZone.html">ActiveSupport::TimeZone</a>.
</p>
<p>
By default, <tt>model</tt> is the <a
href="../../ActiveSupport/TimeZone.html">ActiveSupport::TimeZone</a>
constant (which can be obtained in Active Record as a value object). The
only requirement is that the <tt>model</tt> parameter be an object that
responds to <tt>all</tt>, and returns an array of objects that represent
time zones.
</p>
<p>
NOTE: Only the option tags are returned, you have to wrap this call in a
regular HTML select tag.
</p>          </div>
        
        
                  <div class="sourcecode">
            <p class="source-link">[
            <a href="javascript:toggleSource('time-zone-options-for-select_source')"
                 id="l_method-i-time_zone_options_for_select_source">
              show source
            </a> ]</p>
            <div class="dyn-source"
                    id="time-zone-options-for-select_source">
<pre>
       <span class="ruby-comment cmt"># File actionpack/lib/action_view/helpers/form_options_helper.rb, line 480</span>
480:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">time_zone_options_for_select</span>(<span class="ruby-identifier">selected</span> = <span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">priority_zones</span> = <span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">model</span> = <span class="ruby-operator">::</span><span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">TimeZone</span>)
481:         <span class="ruby-identifier">zone_options</span> = <span class="ruby-value str">&quot;&quot;</span>
482: 
483:         <span class="ruby-identifier">zones</span> = <span class="ruby-identifier">model</span>.<span class="ruby-identifier">all</span>
484:         <span class="ruby-identifier">convert_zones</span> = <span class="ruby-identifier">lambda</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">list</span><span class="ruby-operator">|</span> <span class="ruby-identifier">list</span>.<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">z</span><span class="ruby-operator">|</span> [ <span class="ruby-identifier">z</span>.<span class="ruby-identifier">to_s</span>, <span class="ruby-identifier">z</span>.<span class="ruby-identifier">name</span> ] } }
485: 
486:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">priority_zones</span>
487:                 <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">priority_zones</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Regexp</span>)
488:             <span class="ruby-identifier">priority_zones</span> = <span class="ruby-identifier">model</span>.<span class="ruby-identifier">all</span>.<span class="ruby-identifier">find_all</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">z</span><span class="ruby-operator">|</span> <span class="ruby-identifier">z</span> <span class="ruby-operator">=~</span> <span class="ruby-identifier">priority_zones</span>}
489:                 <span class="ruby-keyword kw">end</span>
490:           <span class="ruby-identifier">zone_options</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">options_for_select</span>(<span class="ruby-identifier">convert_zones</span>[<span class="ruby-identifier">priority_zones</span>], <span class="ruby-identifier">selected</span>)
491:           <span class="ruby-identifier">zone_options</span> <span class="ruby-operator">+=</span> <span class="ruby-value str">&quot;&lt;option value=\&quot;\&quot; disabled=\&quot;disabled\&quot;&gt;-------------&lt;/option&gt;\n&quot;</span>
492: 
493:           <span class="ruby-identifier">zones</span> = <span class="ruby-identifier">zones</span>.<span class="ruby-identifier">reject</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">z</span><span class="ruby-operator">|</span> <span class="ruby-identifier">priority_zones</span>.<span class="ruby-identifier">include?</span>( <span class="ruby-identifier">z</span> ) }
494:         <span class="ruby-keyword kw">end</span>
495: 
496:         <span class="ruby-identifier">zone_options</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">options_for_select</span>(<span class="ruby-identifier">convert_zones</span>[<span class="ruby-identifier">zones</span>], <span class="ruby-identifier">selected</span>)
497:         <span class="ruby-identifier">zone_options</span>.<span class="ruby-identifier">html_safe</span>
498:       <span class="ruby-keyword kw">end</span></pre>
            </div>
          </div>
        
      </div>

          
      <div class="method">
        <div class="title">
                      <a name="method-i-time_zone_select"></a>
            <b>time_zone_select</b>(object, method, priority_zones = nil, options = {}, html_options = {})          
        </div>

                  <div class="description">
            <p>
Return select and option tags for the given object and method, using <a
href="FormOptionsHelper.html#method-i-time_zone_options_for_select">time_zone_options_for_select</a>
to generate the list of option tags.
</p>
<p>
In addition to the <tt>:include_blank</tt> option documented above, this
method also supports a <tt>:model</tt> option, which defaults to <a
href="../../ActiveSupport/TimeZone.html">ActiveSupport::TimeZone</a>. This
may be used by users to specify a different time zone model object. (See
<tt><a
href="FormOptionsHelper.html#method-i-time_zone_options_for_select">time_zone_options_for_select</a></tt>
for more information.)
</p>
<p>
You can also supply an array of <a
href="../../ActiveSupport/TimeZone.html">ActiveSupport::TimeZone</a>
objects as <tt>priority_zones</tt>, so that they will be listed above the
rest of the (long) list. (You can use ActiveSupport::TimeZone.us_zones as a
convenience for obtaining a list of the US time zones, or a Regexp to
select the zones of your choice)
</p>
<p>
Finally, this method supports a <tt>:default</tt> option, which selects a
default <a
href="../../ActiveSupport/TimeZone.html">ActiveSupport::TimeZone</a> if the
object&#8217;s time zone is <tt>nil</tt>.
</p>
<p>
Examples:
</p>
<pre>
  time_zone_select( &quot;user&quot;, &quot;time_zone&quot;, nil, :include_blank =&gt; true)

  time_zone_select( &quot;user&quot;, &quot;time_zone&quot;, nil, :default =&gt; &quot;Pacific Time (US &amp; Canada)&quot; )

  time_zone_select( &quot;user&quot;, 'time_zone', ActiveSupport::TimeZone.us_zones, :default =&gt; &quot;Pacific Time (US &amp; Canada)&quot;)

  time_zone_select( &quot;user&quot;, 'time_zone', [ ActiveSupport::TimeZone['Alaska'], ActiveSupport::TimeZone['Hawaii'] ])

  time_zone_select( &quot;user&quot;, 'time_zone', /Australia/)

  time_zone_select( &quot;user&quot;, &quot;time_zone&quot;, ActiveSupport::Timezone.all.sort, :model =&gt; ActiveSupport::Timezone)</pre>          </div>
        
        
                  <div class="sourcecode">
            <p class="source-link">[
            <a href="javascript:toggleSource('time-zone-select_source')"
                 id="l_method-i-time_zone_select_source">
              show source
            </a> ]</p>
            <div class="dyn-source"
                    id="time-zone-select_source">
<pre>
       <span class="ruby-comment cmt"># File actionpack/lib/action_view/helpers/form_options_helper.rb, line 251</span>
251:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">time_zone_select</span>(<span class="ruby-identifier">object</span>, <span class="ruby-identifier">method</span>, <span class="ruby-identifier">priority_zones</span> = <span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">options</span> = {}, <span class="ruby-identifier">html_options</span> = {})
252:         <span class="ruby-constant">InstanceTag</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">object</span>, <span class="ruby-identifier">method</span>, <span class="ruby-keyword kw">self</span>,  <span class="ruby-identifier">options</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-value">:object</span>)).<span class="ruby-identifier">to_time_zone_select_tag</span>(<span class="ruby-identifier">priority_zones</span>, <span class="ruby-identifier">options</span>, <span class="ruby-identifier">html_options</span>)
253:       <span class="ruby-keyword kw">end</span></pre>
            </div>
          </div>
        
      </div>

              
    <div class="sectiontitle">
      Private      Instance      methods
    </div>

          
      <div class="method">
        <div class="title">
                      <a name="method-i-extract_selected_and_disabled"></a>
            <b>extract_selected_and_disabled</b>(selected)          
        </div>

                  <div class="description">
                      </div>
        
        
                  <div class="sourcecode">
            <p class="source-link">[
            <a href="javascript:toggleSource('extract-selected-and-disabled_source')"
                 id="l_method-i-extract_selected_and_disabled_source">
              show source
            </a> ]</p>
            <div class="dyn-source"
                    id="extract-selected-and-disabled_source">
<pre>
       <span class="ruby-comment cmt"># File actionpack/lib/action_view/helpers/form_options_helper.rb, line 531</span>
531:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">extract_selected_and_disabled</span>(<span class="ruby-identifier">selected</span>)
532:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">selected</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Proc</span>)
533:             [ <span class="ruby-identifier">selected</span>, <span class="ruby-keyword kw">nil</span> ]
534:           <span class="ruby-keyword kw">else</span>
535:             <span class="ruby-identifier">selected</span> = <span class="ruby-constant">Array</span>.<span class="ruby-identifier">wrap</span>(<span class="ruby-identifier">selected</span>)
536:             <span class="ruby-identifier">options</span> = <span class="ruby-identifier">selected</span>.<span class="ruby-identifier">extract_options!</span>.<span class="ruby-identifier">symbolize_keys</span>
537:             [ <span class="ruby-identifier">options</span>[<span class="ruby-value">:selected</span>] <span class="ruby-operator">||</span> <span class="ruby-identifier">selected</span> , <span class="ruby-identifier">options</span>[<span class="ruby-value">:disabled</span>] ]
538:           <span class="ruby-keyword kw">end</span>
539:         <span class="ruby-keyword kw">end</span></pre>
            </div>
          </div>
        
      </div>

          
      <div class="method">
        <div class="title">
                      <a name="method-i-extract_values_from_collection"></a>
            <b>extract_values_from_collection</b>(collection, value_method, selected)          
        </div>

                  <div class="description">
                      </div>
        
        
                  <div class="sourcecode">
            <p class="source-link">[
            <a href="javascript:toggleSource('extract-values-from-collection_source')"
                 id="l_method-i-extract_values_from_collection_source">
              show source
            </a> ]</p>
            <div class="dyn-source"
                    id="extract-values-from-collection_source">
<pre>
       <span class="ruby-comment cmt"># File actionpack/lib/action_view/helpers/form_options_helper.rb, line 541</span>
541:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">extract_values_from_collection</span>(<span class="ruby-identifier">collection</span>, <span class="ruby-identifier">value_method</span>, <span class="ruby-identifier">selected</span>)
542:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">selected</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Proc</span>)
543:             <span class="ruby-identifier">collection</span>.<span class="ruby-identifier">map</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">element</span><span class="ruby-operator">|</span>
544:               <span class="ruby-identifier">element</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">value_method</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">selected</span>.<span class="ruby-identifier">call</span>(<span class="ruby-identifier">element</span>)
545:             <span class="ruby-keyword kw">end</span>.<span class="ruby-identifier">compact</span>
546:           <span class="ruby-keyword kw">else</span>
547:             <span class="ruby-identifier">selected</span>
548:           <span class="ruby-keyword kw">end</span>
549:         <span class="ruby-keyword kw">end</span></pre>
            </div>
          </div>
        
      </div>

          
      <div class="method">
        <div class="title">
                      <a name="method-i-option_html_attributes"></a>
            <b>option_html_attributes</b>(element)          
        </div>

                  <div class="description">
                      </div>
        
        
                  <div class="sourcecode">
            <p class="source-link">[
            <a href="javascript:toggleSource('option-html-attributes_source')"
                 id="l_method-i-option_html_attributes_source">
              show source
            </a> ]</p>
            <div class="dyn-source"
                    id="option-html-attributes_source">
<pre>
       <span class="ruby-comment cmt"># File actionpack/lib/action_view/helpers/form_options_helper.rb, line 501</span>
501:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">option_html_attributes</span>(<span class="ruby-identifier">element</span>)
502:           <span class="ruby-keyword kw">return</span> <span class="ruby-value str">&quot;&quot;</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-constant">Array</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">element</span>
503:           <span class="ruby-identifier">html_attributes</span> = []
504:           <span class="ruby-identifier">element</span>.<span class="ruby-identifier">select</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">e</span><span class="ruby-operator">|</span> <span class="ruby-constant">Hash</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">e</span> }.<span class="ruby-identifier">reduce</span>({}, <span class="ruby-value">:merge</span>).<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">k</span>, <span class="ruby-identifier">v</span><span class="ruby-operator">|</span>
505:             <span class="ruby-identifier">html_attributes</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot; #{k}=\&quot;#{html_escape(v.to_s)}\&quot;&quot;</span>
506:           <span class="ruby-keyword kw">end</span>
507:           <span class="ruby-identifier">html_attributes</span>.<span class="ruby-identifier">join</span>
508:         <span class="ruby-keyword kw">end</span></pre>
            </div>
          </div>
        
      </div>

          
      <div class="method">
        <div class="title">
                      <a name="method-i-option_text_and_value"></a>
            <b>option_text_and_value</b>(option)          
        </div>

                  <div class="description">
                      </div>
        
        
                  <div class="sourcecode">
            <p class="source-link">[
            <a href="javascript:toggleSource('option-text-and-value_source')"
                 id="l_method-i-option_text_and_value_source">
              show source
            </a> ]</p>
            <div class="dyn-source"
                    id="option-text-and-value_source">
<pre>
       <span class="ruby-comment cmt"># File actionpack/lib/action_view/helpers/form_options_helper.rb, line 510</span>
510:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">option_text_and_value</span>(<span class="ruby-identifier">option</span>)
511:           <span class="ruby-comment cmt"># Options are [text, value] pairs or strings used for both.</span>
512:           <span class="ruby-keyword kw">case</span>
513:           <span class="ruby-keyword kw">when</span> <span class="ruby-constant">Array</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">option</span>
514:             <span class="ruby-identifier">option</span> = <span class="ruby-identifier">option</span>.<span class="ruby-identifier">reject</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">e</span><span class="ruby-operator">|</span> <span class="ruby-constant">Hash</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">e</span> }
515:             [<span class="ruby-identifier">option</span>.<span class="ruby-identifier">first</span>, <span class="ruby-identifier">option</span>.<span class="ruby-identifier">last</span>]
516:           <span class="ruby-keyword kw">when</span> <span class="ruby-operator">!</span><span class="ruby-identifier">option</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">String</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">option</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-value">:first</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">option</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-value">:last</span>)
517:             [<span class="ruby-identifier">option</span>.<span class="ruby-identifier">first</span>, <span class="ruby-identifier">option</span>.<span class="ruby-identifier">last</span>]
518:           <span class="ruby-keyword kw">else</span>
519:             [<span class="ruby-identifier">option</span>, <span class="ruby-identifier">option</span>]
520:           <span class="ruby-keyword kw">end</span>
521:         <span class="ruby-keyword kw">end</span></pre>
            </div>
          </div>
        
      </div>

          
      <div class="method">
        <div class="title">
                      <a name="method-i-option_value_selected%3F"></a>
            <b>option_value_selected?</b>(value, selected)          
        </div>

                  <div class="description">
                      </div>
        
        
                  <div class="sourcecode">
            <p class="source-link">[
            <a href="javascript:toggleSource('option-value-selected-_source')"
                 id="l_method-i-option_value_selected%3F_source">
              show source
            </a> ]</p>
            <div class="dyn-source"
                    id="option-value-selected-_source">
<pre>
       <span class="ruby-comment cmt"># File actionpack/lib/action_view/helpers/form_options_helper.rb, line 523</span>
523:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">option_value_selected?</span>(<span class="ruby-identifier">value</span>, <span class="ruby-identifier">selected</span>)
524:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">selected</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-value">:include?</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">selected</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">String</span>)
525:             <span class="ruby-identifier">selected</span>.<span class="ruby-identifier">include?</span> <span class="ruby-identifier">value</span>
526:           <span class="ruby-keyword kw">else</span>
527:             <span class="ruby-identifier">value</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">selected</span>
528:           <span class="ruby-keyword kw">end</span>
529:         <span class="ruby-keyword kw">end</span></pre>
            </div>
          </div>
        
      </div>

      </div>
  </div>
  </body>
</html>
